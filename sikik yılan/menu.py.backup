"""
MenÃ¼ sistemleri - Ana menÃ¼, Ayarlar, Oyun Bitti ekranlarÄ±
"""
import pygame
import os
from constants import *


class Menu:
    def __init__(self, ekran):
        self.ekran = ekran
        # Normal metin iÃ§in font
        try:
            # Helvetica Neue emojileri destekler
            self.font = pygame.font.SysFont('Helvetica Neue', 36)
            self.buyuk_font = pygame.font.SysFont('Helvetica Neue', 72)
            self.kucuk_font = pygame.font.SysFont('Helvetica Neue', 24)
        except:
            try:
                # Alternatif: Menlo (monospace, iyi emoji desteÄŸi)
                self.font = pygame.font.SysFont('menlo', 36)
                self.buyuk_font = pygame.font.SysFont('menlo', 72)
                self.kucuk_font = pygame.font.SysFont('menlo', 24)
            except:
                # Son Ã§are
                self.font = pygame.font.SysFont('arial', 36)
                self.buyuk_font = pygame.font.SysFont('arial', 72)
                self.kucuk_font = pygame.font.SysFont('arial', 24)
        # Buton alanlarÄ± iÃ§in
        self.basla_rect = None
        self.ayarlar_rect = None
        self.modlar_rect = None  # Modlar butonu
        self.hiz_rect = None
        self.arkaplan_rect = None
        self.yilan_rect = None
        self.bomba_rect = None  # Bomba modu butonu (modlar menÃ¼sÃ¼nde)
        self.sifirla_rect = None  # BaÅŸarÄ±mlarÄ± sÄ±fÄ±rla butonu
        # Tam ekran iÃ§in offset ve scale (game.py'den gelecek)
        self.offset_x = 0
        self.offset_y = 0
        self.scale = 1.0
        self.tam_ekran = False
        # Ayarlar alt menÃ¼sÃ¼ (HIZ veya ARKAPLAN)
        self.ayar_alt_menu = None
        # BaÅŸarÄ±mlar scroll offset
        self.basarim_scroll_offset = 0
        # Bot zorluk seÃ§im scroll offset
        self.bot_zorluk_scroll_offset = 0
        # Emoji cache
        self.emoji_cache = {}
    
    def render_emoji(self, emoji_char, size=40, color=(255, 255, 255)):
        """PNG emoji ikonlarÄ±nÄ± yÃ¼kler ve boyutlandÄ±rÄ±r"""
        # Cache'de var mÄ± kontrol et
        cache_key = f"{emoji_char}_{size}"
        if cache_key in self.emoji_cache:
            return self.emoji_cache[cache_key]
        
        # Emoji karakterine gÃ¶re PNG dosyasÄ± seÃ§
        icon_map = {
            "ğŸ®": "icons/gamepad.png",
            "ğŸ’£": "icons/bomb.png",
            "âš”ï¸": "icons/swords.png",
            "ğŸ¤–": "icons/robot.png",
            "ğŸ†": "icons/trophy.png",
            "â­": "icons/star.png",
            "ğŸµ": "icons/music.png",
            "ğŸ”Š": "icons/volume.png",
            "ğŸ”•": "icons/mute.png",
            "ğŸ”‡": "icons/mute.png",
            "âš¡": "icons/lightning.png",
            "ğŸ–¼ï¸": "icons/picture.png",
            "ğŸ": "icons/snake.png",
            "ğŸ¸": "icons/guitar.png",
            "ğŸ‘‘": "icons/crown.png",
            "ğŸ”„": "icons/refresh.png",
            "ğŸ”’": "icons/lock.png",
            "âœ“": "icons/check.png",
            "ğŸ–±ï¸": "icons/mouse.png",
            "â¤ï¸": "icons/heart.png"
        }
        
        icon_path = icon_map.get(emoji_char)
        
        if icon_path and os.path.exists(icon_path):
            try:
                # PNG dosyasÄ±nÄ± yÃ¼kle
                icon = pygame.image.load(icon_path).convert_alpha()
                # BoyutlandÄ±r
                icon = pygame.transform.smoothscale(icon, (size, size))
                # Cache'e ekle
                self.emoji_cache[cache_key] = icon
                return icon
            except Exception as e:
                print(f"âŒ Ä°kon yÃ¼kleme hatasÄ± ({icon_path}): {e}")
        
        # Fallback: basit ÅŸekil Ã§iz
        emoji_surf = pygame.Surface((size, size), pygame.SRCALPHA)
        center = size // 2
        pygame.draw.circle(emoji_surf, color, (center, center), size//2 - 2, 3)
        
        # Cache'e ekle
        self.emoji_cache[cache_key] = emoji_surf
        return emoji_surf
    
    def arkaplan_dosyalari_getir(self):
        """backgrounds klasÃ¶rÃ¼ndeki resimleri listeler"""
        try:
            if os.path.exists(ARKAPLAN_KLASORU):
                dosyalar = [f for f in os.listdir(ARKAPLAN_KLASORU) 
                           if f.lower().endswith(('.png', '.jpg', '.jpeg', '.bmp', '.gif'))]
                return sorted(dosyalar)
            return []
        except:
            return []

    def mouse_pozisyonu_al(self):
        """Fare pozisyonunu alÄ±r, tam ekranda dÃ¼zeltir"""
        mouse_pos = pygame.mouse.get_pos()
        if self.tam_ekran:
            mouse_pos = (
                int((mouse_pos[0] - self.offset_x) / self.scale),
                int((mouse_pos[1] - self.offset_y) / self.scale)
            )
        return mouse_pos

    def ana_menu_ciz(self, en_yuksek_skor):
        """Ana menÃ¼ ekranÄ±nÄ± Ã§izer"""
        # Arka plan game.py'de Ã§izildiÄŸi iÃ§in burada fill yapmÄ±yoruz
        
        # Fare pozisyonu al
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('YILAN OYUNU', True, YESIL)
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 70))
        self.ekran.blit(baslik, baslik_rect)
        
        # Alt baÅŸlÄ±k - ÅŸekilli ÅŸukullu
        # Ä°talik efekti iÃ§in birden fazla renk ve gÃ¶lge
        alt_baslik_text = '~ Klasik yÄ±lan oyununun modern hali ~'
        
        # GÃ¶lge
        alt_baslik_golge = self.kucuk_font.render(alt_baslik_text, True, (50, 50, 50))
        alt_baslik_golge_rect = alt_baslik_golge.get_rect(center=(GENISLIK // 2 + 2, 120 + 2))
        self.ekran.blit(alt_baslik_golge, alt_baslik_golge_rect)
        
        # Ana metin - gradient efekti iÃ§in
        alt_baslik = self.kucuk_font.render(alt_baslik_text, True, (180, 180, 200))
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 120))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # MenÃ¼ butonlarÄ± iÃ§in ayarlar
        buton_genislik = 350
        buton_yukseklik = 50
        butonlar_x = GENISLIK // 2 - buton_genislik // 2
        ilk_buton_y = 170
        buton_aralik = 65
        
        # BAÅLA butonu
        basla_y = ilk_buton_y
        self.basla_rect = pygame.Rect(butonlar_x, basla_y, buton_genislik, buton_yukseklik)
        basla_renk = YESIL if self.basla_rect.collidepoint(mouse_pos) else BEYAZ
        
        # Hover efekti
        if self.basla_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, KOYUYESIL, self.basla_rect, border_radius=12)
            pygame.draw.rect(self.ekran, YESIL, self.basla_rect, 3, border_radius=12)
        
        basla_text = self.font.render('BAÅLA', True, basla_renk)
        basla_text_rect = basla_text.get_rect(center=self.basla_rect.center)
        self.ekran.blit(basla_text, basla_text_rect)
        
        # MODLAR butonu
        modlar_y = ilk_buton_y + buton_aralik
        self.modlar_rect = pygame.Rect(butonlar_x, modlar_y, buton_genislik, buton_yukseklik)
        modlar_renk = YESIL if self.modlar_rect.collidepoint(mouse_pos) else MAVI
        
        # Hover efekti
        if self.modlar_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (0, 0, 100), self.modlar_rect, border_radius=12)
            pygame.draw.rect(self.ekran, MAVI, self.modlar_rect, 3, border_radius=12)
        
        modlar_text = self.font.render('MODLAR', True, modlar_renk)
        modlar_text_rect = modlar_text.get_rect(center=self.modlar_rect.center)
        self.ekran.blit(modlar_text, modlar_text_rect)
        
        # AYARLAR butonu
        ayarlar_y = ilk_buton_y + buton_aralik * 2
        self.ayarlar_rect = pygame.Rect(butonlar_x, ayarlar_y, buton_genislik, buton_yukseklik)
        ayarlar_renk = YESIL if self.ayarlar_rect.collidepoint(mouse_pos) else TURUNCU
        
        # Hover efekti
        if self.ayarlar_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (139, 69, 19), self.ayarlar_rect, border_radius=12)
            pygame.draw.rect(self.ekran, TURUNCU, self.ayarlar_rect, 3, border_radius=12)
        
        ayarlar_text = self.font.render('AYARLAR', True, ayarlar_renk)
        ayarlar_text_rect = ayarlar_text.get_rect(center=self.ayarlar_rect.center)
        self.ekran.blit(ayarlar_text, ayarlar_text_rect)
        
        # BAÅARIMLAR butonu
        basarimlar_y = ilk_buton_y + buton_aralik * 3
        self.basarimlar_rect = pygame.Rect(butonlar_x, basarimlar_y, buton_genislik, buton_yukseklik)
        basarimlar_renk = YESIL if self.basarimlar_rect.collidepoint(mouse_pos) else (255, 215, 0)
        
        # Hover efekti
        if self.basarimlar_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (139, 115, 0), self.basarimlar_rect, border_radius=12)
            pygame.draw.rect(self.ekran, (255, 215, 0), self.basarimlar_rect, 3, border_radius=12)
        
        basarimlar_text = self.font.render('BAÅARIMLAR', True, basarimlar_renk)
        basarimlar_text_rect = basarimlar_text.get_rect(center=self.basarimlar_rect.center)
        self.ekran.blit(basarimlar_text, basarimlar_text_rect)
        
        # Ä°STATÄ°STÄ°KLER butonu
        istatistikler_y = ilk_buton_y + buton_aralik * 4
        self.istatistikler_rect = pygame.Rect(butonlar_x, istatistikler_y, buton_genislik, buton_yukseklik)
        istatistikler_renk = YESIL if self.istatistikler_rect.collidepoint(mouse_pos) else (100, 200, 255)
        
        # Hover efekti
        if self.istatistikler_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (50, 100, 139), self.istatistikler_rect, border_radius=12)
            pygame.draw.rect(self.ekran, (100, 200, 255), self.istatistikler_rect, 3, border_radius=12)
        
        istatistikler_text = self.font.render('Ä°STATÄ°STÄ°KLER', True, istatistikler_renk)
        istatistikler_text_rect = istatistikler_text.get_rect(center=self.istatistikler_rect.center)
        self.ekran.blit(istatistikler_text, istatistikler_text_rect)
        
        # EMEÄÄ° GEÃ‡ENLER butonu - yukarÄ± kaydÄ±rÄ±ldÄ±, kalp ikonuyla
        krediler_y = 495
        kalp_icon_size = 18
        
        # Kalp ikonu
        kalp_icon = self.render_emoji("â¤ï¸", kalp_icon_size, (255, 50, 80))
        kalp_x = GENISLIK // 2 - 80
        kalp_y = krediler_y - kalp_icon_size // 2
        
        # Metin
        krediler_text = self.kucuk_font.render('EmeÄŸi GeÃ§enler', True, ACIK_GRI)
        krediler_text_rect = krediler_text.get_rect(midleft=(kalp_x + kalp_icon_size + 5, krediler_y))
        
        # Clickable rect - kalp + metin
        text_width = krediler_text_rect.width
        total_width = kalp_icon_size + 5 + text_width
        self.krediler_rect = pygame.Rect(
            GENISLIK // 2 - total_width // 2 - 10, 
            krediler_y - 12, 
            total_width + 20, 
            24
        )
        
        # Hover efekti
        krediler_renk = ACIK_GRI
        if self.krediler_rect.collidepoint(mouse_pos):
            krediler_renk = (255, 215, 0)
            pygame.draw.rect(self.ekran, (40, 35, 20), self.krediler_rect, border_radius=5)
            pygame.draw.rect(self.ekran, (255, 215, 0), self.krediler_rect, 2, border_radius=5)
        
        # Kalp ve metni Ã§iz
        self.ekran.blit(kalp_icon, (kalp_x, kalp_y))
        krediler_text = self.kucuk_font.render('EmeÄŸi GeÃ§enler', True, krediler_renk)
        krediler_text_rect = krediler_text.get_rect(midleft=(kalp_x + kalp_icon_size + 5, krediler_y))
        self.ekran.blit(krediler_text, krediler_text_rect)

    def ayarlar_menu_ciz(self, hiz_seviyesi, menu_arkaplan, oyun_arkaplan, ses_acik=True, muzik_acik=True):
        """Ayarlar menÃ¼sÃ¼ ana ekranÄ±nÄ± Ã§izer"""
        # Arka plan game.py'de Ã§izildiÄŸi iÃ§in burada fill yapmÄ±yoruz
        
        # Fare pozisyonu al
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('AYARLAR', True, TURUNCU)
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 40))
        self.ekran.blit(baslik, baslik_rect)
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('Oyun tercihlerinizi Ã¶zelleÅŸtirin', True, ACIK_GRI)
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 75))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # Ayar kartlarÄ±
        y_start = 110
        card_spacing = 62
        card_width = 680
        card_height = 55
        
        # Kart 1: Ses Efektleri
        ses_y = y_start
        self.ses_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, ses_y, card_width, card_height)
        
        if self.ses_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (40, 50, 70), self.ses_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (100, 200, 255), self.ses_rect, 2, border_radius=10)
        else:
            pygame.draw.rect(self.ekran, (25, 25, 35), self.ses_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (70, 70, 90), self.ses_rect, 1, border_radius=10)
        
        # Ä°kon ve baÅŸlÄ±k
        ses_ikon = "ğŸ”Š" if ses_acik else "ğŸ”‡"
        ikon_img = self.render_emoji(ses_ikon, 36)
        self.ekran.blit(ikon_img, (self.ses_rect.x + 20, self.ses_rect.y + 10))
        
        ses_text = self.font.render('Ses Efektleri', True, BEYAZ)
        self.ekran.blit(ses_text, (self.ses_rect.x + 70, self.ses_rect.y + 8))
        
        # Durum
        ses_durum = self.kucuk_font.render("AÃ§Ä±k" if ses_acik else "KapalÄ±", True, YESIL if ses_acik else KIRMIZI)
        ses_durum_rect = ses_durum.get_rect(right=self.ses_rect.right - 20, centery=self.ses_rect.centery)
        self.ekran.blit(ses_durum, ses_durum_rect)
        
        # Kart 2: MÃ¼zik
        muzik_y = ses_y + card_spacing
        self.muzik_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, muzik_y, card_width, card_height)
        
        if self.muzik_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (40, 50, 70), self.muzik_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (100, 200, 255), self.muzik_rect, 2, border_radius=10)
        else:
            pygame.draw.rect(self.ekran, (25, 25, 35), self.muzik_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (70, 70, 90), self.muzik_rect, 1, border_radius=10)
        
        muzik_ikon = "ğŸµ" if muzik_acik else "ğŸ”•"
        ikon_img = self.render_emoji(muzik_ikon, 36)
        self.ekran.blit(ikon_img, (self.muzik_rect.x + 20, self.muzik_rect.y + 10))
        
        muzik_text = self.font.render('MÃ¼zik', True, BEYAZ)
        self.ekran.blit(muzik_text, (self.muzik_rect.x + 70, self.muzik_rect.y + 8))
        
        muzik_durum = self.kucuk_font.render("AÃ§Ä±k" if muzik_acik else "KapalÄ±", True, YESIL if muzik_acik else KIRMIZI)
        muzik_durum_rect = muzik_durum.get_rect(right=self.muzik_rect.right - 20, centery=self.muzik_rect.centery)
        self.ekran.blit(muzik_durum, muzik_durum_rect)
        
        # Kart 3: Oyun HÄ±zÄ±
        hiz_y = muzik_y + card_spacing
        self.hiz_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, hiz_y, card_width, card_height)
        
        if self.hiz_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (40, 50, 70), self.hiz_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (100, 200, 255), self.hiz_rect, 2, border_radius=10)
        else:
            pygame.draw.rect(self.ekran, (25, 25, 35), self.hiz_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (70, 70, 90), self.hiz_rect, 1, border_radius=10)
        
        ikon_img = self.render_emoji('âš¡', 36)
        self.ekran.blit(ikon_img, (self.hiz_rect.x + 20, self.hiz_rect.y + 10))
        
        hiz_text = self.font.render('Oyun HÄ±zÄ±', True, BEYAZ)
        self.ekran.blit(hiz_text, (self.hiz_rect.x + 70, self.hiz_rect.y + 8))
        
        hiz_deger = self.kucuk_font.render(HIZ_ISIMLERI[hiz_seviyesi], True, (255, 215, 0))
        hiz_deger_rect = hiz_deger.get_rect(right=self.hiz_rect.right - 20, centery=self.hiz_rect.centery)
        self.ekran.blit(hiz_deger, hiz_deger_rect)
        
        # Kart 4: Arka Planlar
        arkaplan_y = hiz_y + card_spacing
        self.arkaplan_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, arkaplan_y, card_width, card_height)
        
        if self.arkaplan_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (40, 50, 70), self.arkaplan_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (100, 200, 255), self.arkaplan_rect, 2, border_radius=10)
        else:
            pygame.draw.rect(self.ekran, (25, 25, 35), self.arkaplan_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (70, 70, 90), self.arkaplan_rect, 1, border_radius=10)
        
        ikon_img = self.render_emoji('ğŸ–¼ï¸', 36)
        self.ekran.blit(ikon_img, (self.arkaplan_rect.x + 20, self.arkaplan_rect.y + 10))
        
        arkaplan_text = self.font.render('Arka Planlar', True, BEYAZ)
        self.ekran.blit(arkaplan_text, (self.arkaplan_rect.x + 70, self.arkaplan_rect.y + 8))
        
        menu_bg_text = "âœ“" if menu_arkaplan else "â—‹"
        oyun_bg_text = "âœ“" if oyun_arkaplan else "â—‹"
        bg_deger = self.kucuk_font.render(f'MenÃ¼ {menu_bg_text} | Oyun {oyun_bg_text}', True, ACIK_GRI)
        bg_deger_rect = bg_deger.get_rect(right=self.arkaplan_rect.right - 20, centery=self.arkaplan_rect.centery)
        self.ekran.blit(bg_deger, bg_deger_rect)
        
        # Kart 5: YÄ±lan GÃ¶rÃ¼nÃ¼mÃ¼
        yilan_y = arkaplan_y + card_spacing
        self.yilan_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, yilan_y, card_width, card_height)
        
        if self.yilan_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (40, 50, 70), self.yilan_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (100, 200, 255), self.yilan_rect, 2, border_radius=10)
        else:
            pygame.draw.rect(self.ekran, (25, 25, 35), self.yilan_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (70, 70, 90), self.yilan_rect, 1, border_radius=10)
        
        ikon_img = self.render_emoji('ğŸ', 36)
        self.ekran.blit(ikon_img, (self.yilan_rect.x + 20, self.yilan_rect.y + 10))
        
        yilan_text = self.font.render('YÄ±lan GÃ¶rÃ¼nÃ¼mÃ¼', True, BEYAZ)
        self.ekran.blit(yilan_text, (self.yilan_rect.x + 70, self.yilan_rect.y + 8))
        
        yilan_deger = self.kucuk_font.render('Renk ve YÃ¼z', True, ACIK_GRI)
        yilan_deger_rect = yilan_deger.get_rect(right=self.yilan_rect.right - 20, centery=self.yilan_rect.centery)
        self.ekran.blit(yilan_deger, yilan_deger_rect)
        
        # Kart 6: MÃ¼zik SeÃ§ici
        muzik_secici_y = yilan_y + card_spacing
        self.muzik_secici_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, muzik_secici_y, card_width, card_height)
        
        if self.muzik_secici_rect.collidepoint(mouse_pos):
            pygame.draw.rect(self.ekran, (40, 50, 70), self.muzik_secici_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (100, 200, 255), self.muzik_secici_rect, 2, border_radius=10)
        else:
            pygame.draw.rect(self.ekran, (25, 25, 35), self.muzik_secici_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (70, 70, 90), self.muzik_secici_rect, 1, border_radius=10)
        
        ikon_img = self.render_emoji('ğŸ¸', 36)
        self.ekran.blit(ikon_img, (self.muzik_secici_rect.x + 20, self.muzik_secici_rect.y + 10))
        
        muzik_secici_text = self.font.render('MÃ¼zik SeÃ§ici', True, BEYAZ)
        self.ekran.blit(muzik_secici_text, (self.muzik_secici_rect.x + 70, self.muzik_secici_rect.y + 8))
        
        muzik_secici_deger = self.kucuk_font.render('Ã–zel MÃ¼zikler', True, ACIK_GRI)
        muzik_secici_deger_rect = muzik_secici_deger.get_rect(right=self.muzik_secici_rect.right - 20, centery=self.muzik_secici_rect.centery)
        self.ekran.blit(muzik_secici_deger, muzik_secici_deger_rect)
        
        # Alt bilgi kutusu
        bilgi_y = 540
        bilgi_rect = pygame.Rect(GENISLIK // 2 - 350, bilgi_y, 700, 30)
        pygame.draw.rect(self.ekran, (20, 20, 30), bilgi_rect, border_radius=6)
        
        bilgi_text = self.kucuk_font.render('ğŸ’¡ Kartlara tÄ±klayarak ayarlarÄ± deÄŸiÅŸtirin', True, (150, 150, 200))
        bilgi_text_rect = bilgi_text.get_rect(center=(GENISLIK // 2, bilgi_y + 15))
        self.ekran.blit(bilgi_text, bilgi_text_rect)
        
        # Geri dÃ¶n
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Ana MenÃ¼', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 580))
        self.ekran.blit(geri_text, geri_rect)
    
    def hiz_ayarlari_menu_ciz(self, hiz_seviyesi):
        """HÄ±z ayarlarÄ± alt menÃ¼sÃ¼ - Modern ve gÃ¶rsel tasarÄ±m"""
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('OYUN HIZI', True, YESIL)
        self.ekran.blit(baslik, baslik.get_rect(center=(GENISLIK // 2, 50)))
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('YÄ±lanÄ±n ne kadar hÄ±zlÄ± hareket edeceÄŸini seÃ§in', True, ACIK_GRI)
        self.ekran.blit(alt_baslik, alt_baslik.get_rect(center=(GENISLIK // 2, 85)))
        
        # HÄ±z ikonlarÄ± ve aÃ§Ä±klamalarÄ±
        hiz_icons = ['ğŸŒ', 'ğŸš¶', 'ğŸƒ', 'âš¡']  # YavaÅŸ, Normal, HÄ±zlÄ±, Ã‡ok HÄ±zlÄ±
        hiz_aciklamalar = [
            'Rahat bir tempo',
            'Dengeli oyun deneyimi',
            'Heyecan verici tempoda',
            'Uzmanlar iÃ§in!'
        ]
        hiz_renkler = [
            (100, 149, 237),  # Cornflower Blue (YavaÅŸ)
            (60, 179, 113),   # Medium Sea Green (Normal)
            (255, 165, 0),    # Orange (HÄ±zlÄ±)
            (220, 20, 60)     # Crimson (Ã‡ok HÄ±zlÄ±)
        ]
        
        # Grid layout (2x2)
        self.hiz_secenekleri_rects = []
        grid_start_x = GENISLIK // 2 - 320
        grid_start_y = 140
        card_width = 300
        card_height = 120
        spacing = 20
        
        for i, isim in enumerate(HIZ_ISIMLERI):
            # Grid pozisyonu hesapla
            col = i % 2
            row = i // 2
            x = grid_start_x + col * (card_width + spacing)
            y = grid_start_y + row * (card_height + spacing)
            
            # Kart alanÄ±
            card_rect = pygame.Rect(x, y, card_width, card_height)
            self.hiz_secenekleri_rects.append((i, card_rect))
            
            # SeÃ§ili veya hover durumuna gÃ¶re stil
            is_selected = i == hiz_seviyesi
            is_hovered = card_rect.collidepoint(mouse_pos)
            
            # Arka plan rengi ve kenarlÄ±k
            if is_selected:
                # SeÃ§ili - parlak ve vurgulu
                bg_color = tuple(min(c + 40, 255) for c in hiz_renkler[i])
                border_color = hiz_renkler[i]
                border_width = 4
                # Hafif glow efekti
                glow_rect = card_rect.inflate(8, 8)
                pygame.draw.rect(self.ekran, border_color, glow_rect, border_radius=15)
            elif is_hovered:
                # Hover - hafif aydÄ±nlatma
                bg_color = tuple(max(c - 20, 0) for c in hiz_renkler[i])
                border_color = tuple(min(c + 30, 255) for c in hiz_renkler[i])
                border_width = 3
            else:
                # Normal - koyu ton
                bg_color = tuple(max(c - 40, 0) for c in hiz_renkler[i])
                border_color = tuple(max(c - 20, 0) for c in hiz_renkler[i])
                border_width = 2
            
            # Kart arka planÄ± (gradient efekti iÃ§in iki katman)
            pygame.draw.rect(self.ekran, bg_color, card_rect, border_radius=12)
            pygame.draw.rect(self.ekran, border_color, card_rect, border_width, border_radius=12)
            
            # Ä°kon (sol Ã¼stte)
            icon = self.render_emoji(hiz_icons[i], 48)
            icon_x = x + 25
            icon_y = y + 25
            self.ekran.blit(icon, (icon_x, icon_y))
            
            # HÄ±z ismi (saÄŸ Ã¼stte, bÃ¼yÃ¼k)
            isim_text = self.font.render(isim, True, BEYAZ if is_selected or is_hovered else ACIK_GRI)
            isim_rect = isim_text.get_rect(left=icon_x + 60, centery=icon_y + 18)
            self.ekran.blit(isim_text, isim_rect)
            
            # FPS bilgisi (kÃ¼Ã§Ã¼k, saÄŸ Ã¼stte)
            fps_text = self.kucuk_font.render(f'{HIZ_FPS[i]} FPS', True, 
                                             YESIL if is_selected else ACIK_GRI)
            fps_rect = fps_text.get_rect(right=x + card_width - 15, top=y + 15)
            self.ekran.blit(fps_text, fps_rect)
            
            # AÃ§Ä±klama (alt kÄ±sÄ±mda)
            aciklama_text = self.kucuk_font.render(hiz_aciklamalar[i], True, 
                                                   BEYAZ if is_selected else GRI)
            aciklama_rect = aciklama_text.get_rect(left=x + 25, bottom=y + card_height - 15)
            self.ekran.blit(aciklama_text, aciklama_rect)
            
            # SeÃ§ili iÅŸareti (saÄŸ alt kÃ¶ÅŸede)
            if is_selected:
                check_icon = self.render_emoji('âœ“', 24)
                self.ekran.blit(check_icon, (x + card_width - 40, y + card_height - 40))
        
        # Talimatlar
        talimat = self.kucuk_font.render('Ok tuÅŸlarÄ± veya Fare ile seÃ§', True, ACIK_GRI)
        self.ekran.blit(talimat, talimat.get_rect(center=(GENISLIK // 2, 480)))
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Ayarlara DÃ¶n', True, GRI)
        self.ekran.blit(geri_text, geri_text.get_rect(center=(GENISLIK // 2, 505)))
    
    def _sekme_ciz(self, rect, isim, emoji, aktif, aktif_renk, mouse_pos):
        """Tek bir sekme Ã§izer"""
        # Arka plan rengi
        pygame.draw.rect(
            self.ekran,
            aktif_renk if aktif else (60, 60, 80),
            rect,
            border_radius=8
        )
        # Hover efekti
        if rect.collidepoint(mouse_pos) and not aktif:
            pygame.draw.rect(self.ekran, (80, 80, 100), rect, 3, border_radius=8)
        # Metin
        text = self.kucuk_font.render(f'{emoji} {isim}', True, BEYAZ)
        self.ekran.blit(text, text.get_rect(center=rect.center))
    
    def _renk_sekmesi_ciz(self, renk_index, mouse_pos):
        """Renk seÃ§im sekmesini Ã§izer"""
        y_start, x_start = 150, GENISLIK // 2 - 270
        col_width, row_height, cols = 180, 50, 3
        self.renk_rects = []
        
        for i, (isim, acik, orta, koyu) in enumerate(YILAN_RENKLERI):
            row, col = i // cols, i % cols
            x, y = x_start + col * col_width, y_start + row * row_height
            buton_rect = pygame.Rect(x - 10, y - 20, 170, 45)
            self.renk_rects.append((i, buton_rect))
            
            # Vurgulama
            if i == renk_index:
                pygame.draw.rect(self.ekran, YESIL, buton_rect, 3, border_radius=8)
            elif buton_rect.collidepoint(mouse_pos):
                pygame.draw.rect(self.ekran, ACIK_GRI, buton_rect, 2, border_radius=8)
            
            # Renk Ã¶nizlemesi
            for radius, color in [(16, koyu), (13, orta), (10, acik)]:
                pygame.draw.circle(self.ekran, color, (x + 20, y), radius)
            
            # Ä°sim
            text = self.kucuk_font.render(
                f'â†’ {isim}' if i == renk_index else f'  {isim}',
                True,
                YESIL if i == renk_index else BEYAZ
            )
            self.ekran.blit(text, text.get_rect(left=x + 45, centery=y))
    
    def _yuz_sekmesi_ciz(self, yuz_index, renk_index, mouse_pos):
        """YÃ¼z seÃ§im sekmesini Ã§izer"""
        y_start = 150
        x_left, x_right = GENISLIK // 2 - 180, GENISLIK // 2 + 20
        row_height = 50
        self.yuz_rects = []
        
        for i, (isim, tip) in enumerate(YILAN_YUZLERI):
            x = x_left if i < 5 else x_right
            y = y_start + (i % 5) * row_height
            buton_rect = pygame.Rect(x - 30, y - 20, 180, 45)
            self.yuz_rects.append((i, buton_rect))
            
            # Vurgulama
            if i == yuz_index:
                pygame.draw.rect(self.ekran, TURUNCU, buton_rect, 3, border_radius=8)
            elif buton_rect.collidepoint(mouse_pos):
                pygame.draw.rect(self.ekran, ACIK_GRI, buton_rect, 2, border_radius=8)
            
            # Kafa Ã§izimi
            _, acik, orta, koyu = YILAN_RENKLERI[renk_index]
            for radius, color in [(16, koyu), (13, orta), (10, acik)]:
                pygame.draw.circle(self.ekran, color, (x, y), radius)
            self._yuz_ciz(x, y, tip)
            
            # Ä°sim
            text = self.kucuk_font.render(
                f'â†’ {isim}' if i == yuz_index else f'  {isim}',
                True,
                TURUNCU if i == yuz_index else BEYAZ
            )
            self.ekran.blit(text, text.get_rect(left=x + 25, centery=y))
    
    def _aksesuar_ikonu_ciz(self, tip, icon_x, icon_y):
        """Aksesuar ikonunu Ã§izer"""
        icon_map = {
            "gozluk": lambda: [
                pygame.draw.circle(self.ekran, (50, 50, 50), (icon_x - 5, icon_y), 6, 2),
                pygame.draw.circle(self.ekran, (50, 50, 50), (icon_x + 5, icon_y), 6, 2),
                pygame.draw.line(self.ekran, (50, 50, 50), (icon_x - 5, icon_y), (icon_x + 5, icon_y), 2)
            ],
            "gunes_gozluk": lambda: [
                pygame.draw.circle(self.ekran, (30, 30, 30), (icon_x - 5, icon_y), 6),
                pygame.draw.circle(self.ekran, (30, 30, 30), (icon_x + 5, icon_y), 6)
            ],
            "sapka": lambda: [
                pygame.draw.rect(self.ekran, (139, 69, 19), (icon_x - 8, icon_y - 8, 16, 5)),
                pygame.draw.circle(self.ekran, (139, 69, 19), (icon_x, icon_y - 3), 8)
            ],
            "tac": lambda: [
                pygame.draw.polygon(self.ekran, (255, 215, 0), [
                    (icon_x - 8, icon_y), (icon_x - 5, icon_y - 8), (icon_x, icon_y - 4),
                    (icon_x + 5, icon_y - 8), (icon_x + 8, icon_y)
                ])
            ],
            "bandana": lambda: [pygame.draw.rect(self.ekran, KIRMIZI, (icon_x - 10, icon_y - 4, 20, 4))],
            "papyon": lambda: [
                pygame.draw.polygon(self.ekran, KIRMIZI, [(icon_x - 8, icon_y - 3), (icon_x - 3, icon_y), (icon_x - 8, icon_y + 3)]),
                pygame.draw.polygon(self.ekran, KIRMIZI, [(icon_x + 8, icon_y - 3), (icon_x + 3, icon_y), (icon_x + 8, icon_y + 3)])
            ],
            "saat": lambda: [
                pygame.draw.circle(self.ekran, (192, 192, 192), (icon_x, icon_y), 7, 2),
                pygame.draw.line(self.ekran, (192, 192, 192), (icon_x, icon_y), (icon_x + 3, icon_y - 3), 2)
            ],
            "kupe": lambda: [
                pygame.draw.circle(self.ekran, (255, 215, 0), (icon_x, icon_y), 5, 2),
                pygame.draw.circle(self.ekran, (255, 215, 0), (icon_x, icon_y + 5), 3)
            ],
            "zincir": lambda: [pygame.draw.circle(self.ekran, (192, 192, 192), (icon_x + o, icon_y), 2) for o in range(-6, 7, 4)]
        }
        if tip in icon_map:
            icon_map[tip]()
    
    def _aksesuar_sekmesi_ciz(self, aksesuar_index, mouse_pos):
        """Aksesuar seÃ§im sekmesini Ã§izer"""
        from constants import YILAN_AKSESUARLARI
        y_start = 150
        x_left, x_right = GENISLIK // 2 - 180, GENISLIK // 2 + 20
        row_height = 50
        self.aksesuar_rects = []
        
        for i, (isim, tip) in enumerate(YILAN_AKSESUARLARI):
            x = x_left if i < 5 else x_right
            y = y_start + (i % 5) * row_height
            buton_rect = pygame.Rect(x - 10, y - 20, 180, 45)
            self.aksesuar_rects.append((i, buton_rect))
            
            # Vurgulama
            if i == aksesuar_index:
                pygame.draw.rect(self.ekran, (255, 215, 0), buton_rect, 3, border_radius=8)
            elif buton_rect.collidepoint(mouse_pos):
                pygame.draw.rect(self.ekran, ACIK_GRI, buton_rect, 2, border_radius=8)
            
            # Ä°kon Ã§iz
            if tip != "yok":
                self._aksesuar_ikonu_ciz(tip, x + 15, y)
            
            # Ä°sim
            text = self.kucuk_font.render(
                f'â†’ {isim}' if i == aksesuar_index else f'  {isim}',
                True,
                (255, 215, 0) if i == aksesuar_index else BEYAZ
            )
            self.ekran.blit(text, text.get_rect(left=x + 40, centery=y))
    
    def yilan_ozellestirme_menu_ciz(self, renk_index, yuz_index, aksesuar_index=0, hangi_secim="RENK"):
        """YÄ±lan Ã¶zelleÅŸtirme menÃ¼sÃ¼ - renk, yÃ¼z ve aksesuar seÃ§imi"""
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('YILAN GÃ–RÃœNÃœMÃœ', True, YESIL)
        self.ekran.blit(baslik, baslik.get_rect(center=(GENISLIK // 2, 50)))
        
        # Sekmeler
        tab_y, tab_width, tab_height, tab_spacing = 90, 150, 35, 10
        tabs_start_x = GENISLIK // 2 - (tab_width * 3 + tab_spacing * 2) // 2
        
        # Sekmeleri Ã§iz
        renk_tab_rect = pygame.Rect(tabs_start_x, tab_y, tab_width, tab_height)
        yuz_tab_rect = pygame.Rect(tabs_start_x + tab_width + tab_spacing, tab_y, tab_width, tab_height)
        aksesuar_tab_rect = pygame.Rect(tabs_start_x + (tab_width + tab_spacing) * 2, tab_y, tab_width, tab_height)
        
        self._sekme_ciz(renk_tab_rect, 'Renk', 'ğŸ¨', hangi_secim == "RENK", YESIL, mouse_pos)
        self._sekme_ciz(yuz_tab_rect, 'YÃ¼z', 'ğŸ˜Š', hangi_secim == "YUZ", TURUNCU, mouse_pos)
        self._sekme_ciz(aksesuar_tab_rect, 'Aksesuar', 'ğŸ‘“', hangi_secim == "AKSESUAR", (255, 215, 0), mouse_pos)
        
        # Sekme rectlerini sakla
        self.renk_tab_rect = renk_tab_rect
        self.yuz_tab_rect = yuz_tab_rect
        self.aksesuar_tab_rect = aksesuar_tab_rect
        
        # Ä°Ã§erik Ã§iz
        if hangi_secim == "RENK":
            self._renk_sekmesi_ciz(renk_index, mouse_pos)
        elif hangi_secim == "YUZ":
            self._yuz_sekmesi_ciz(yuz_index, renk_index, mouse_pos)
        else:
            self._aksesuar_sekmesi_ciz(aksesuar_index, mouse_pos)
        
        # Talimatlar ve geri buton
        talimat = self.kucuk_font.render('Fare ile seÃ§ veya Ok tuÅŸlarÄ± | TAB: Sonraki sekme', True, ACIK_GRI)
        self.ekran.blit(talimat, talimat.get_rect(center=(GENISLIK // 2, 480)))
        
        geri_text = self.kucuk_font.render('ESC - Ayarlara DÃ¶n', True, GRI)
        self.ekran.blit(geri_text, geri_text.get_rect(center=(GENISLIK // 2, 505)))
        
    
    def _yuz_ciz(self, x, y, tip):
        """YÃ¼z Ã§izme yardÄ±mcÄ± fonksiyonu"""
        goz1_x, goz1_y = x - 5, y - 3
        goz2_x, goz2_y = x + 5, y - 3
        
        if tip == "normal":
            pygame.draw.circle(self.ekran, BEYAZ, (goz1_x, goz1_y), 4)
            pygame.draw.circle(self.ekran, BEYAZ, (goz2_x, goz2_y), 4)
            pygame.draw.circle(self.ekran, SIYAH, (goz1_x, goz1_y), 2)
            pygame.draw.circle(self.ekran, SIYAH, (goz2_x, goz2_y), 2)
        elif tip == "mutlu":
            pygame.draw.arc(self.ekran, SIYAH, (goz1_x - 3, goz1_y - 3, 6, 6), 0, 3.14, 2)
            pygame.draw.arc(self.ekran, SIYAH, (goz2_x - 3, goz2_y - 3, 6, 6), 0, 3.14, 2)
            # GÃ¼lÃ¼mseme
            pygame.draw.arc(self.ekran, SIYAH, (x - 5, y + 2, 10, 6), 3.14, 6.28, 2)
        elif tip == "saskÄ±n":
            pygame.draw.circle(self.ekran, BEYAZ, (goz1_x, goz1_y), 5)
            pygame.draw.circle(self.ekran, BEYAZ, (goz2_x, goz2_y), 5)
            pygame.draw.circle(self.ekran, SIYAH, (goz1_x, goz1_y), 3)
            pygame.draw.circle(self.ekran, SIYAH, (goz2_x, goz2_y), 3)
        elif tip == "sinirli":
            pygame.draw.circle(self.ekran, BEYAZ, (goz1_x, goz1_y), 4)
            pygame.draw.circle(self.ekran, BEYAZ, (goz2_x, goz2_y), 4)
            pygame.draw.circle(self.ekran, KIRMIZI, (goz1_x, goz1_y), 2)
            pygame.draw.circle(self.ekran, KIRMIZI, (goz2_x, goz2_y), 2)
            # KaÅŸlar
            pygame.draw.line(self.ekran, KIRMIZI, (goz1_x - 3, goz1_y - 4), (goz1_x + 3, goz1_y - 5), 2)
            pygame.draw.line(self.ekran, KIRMIZI, (goz2_x - 3, goz2_y - 5), (goz2_x + 3, goz2_y - 4), 2)
        elif tip == "havali":
            # GÃ¼neÅŸ gÃ¶zlÃ¼ÄŸÃ¼
            pygame.draw.circle(self.ekran, (30, 30, 30), (goz1_x, goz1_y), 4)
            pygame.draw.circle(self.ekran, (30, 30, 30), (goz2_x, goz2_y), 4)
        elif tip == "uyuyan":
            # KapalÄ± gÃ¶zler
            pygame.draw.line(self.ekran, SIYAH, (goz1_x - 3, goz1_y), (goz1_x + 3, goz1_y), 2)
            pygame.draw.line(self.ekran, SIYAH, (goz2_x - 3, goz2_y), (goz2_x + 3, goz2_y), 2)
            # Z simgesi
            pygame.draw.line(self.ekran, (100, 100, 255), (x + 8, y - 8), (x + 12, y - 8), 2)
            pygame.draw.line(self.ekran, (100, 100, 255), (x + 12, y - 8), (x + 8, y - 4), 2)
            pygame.draw.line(self.ekran, (100, 100, 255), (x + 8, y - 4), (x + 12, y - 4), 2)
        elif tip == "asik":
            # Kalp gÃ¶zler
            pygame.draw.circle(self.ekran, (255, 20, 147), (goz1_x - 1, goz1_y - 1), 3)
            pygame.draw.circle(self.ekran, (255, 20, 147), (goz1_x + 1, goz1_y - 1), 3)
            pygame.draw.circle(self.ekran, (255, 20, 147), (goz2_x - 1, goz2_y - 1), 3)
            pygame.draw.circle(self.ekran, (255, 20, 147), (goz2_x + 1, goz2_y - 1), 3)
        elif tip == "deli":
            # Spiral gÃ¶zler
            pygame.draw.circle(self.ekran, BEYAZ, (goz1_x, goz1_y), 4)
            pygame.draw.circle(self.ekran, BEYAZ, (goz2_x, goz2_y), 4)
            pygame.draw.circle(self.ekran, SIYAH, (goz1_x, goz1_y), 3, 1)
            pygame.draw.circle(self.ekran, SIYAH, (goz2_x, goz2_y), 3, 1)
            pygame.draw.circle(self.ekran, SIYAH, (goz1_x, goz1_y), 1)
            pygame.draw.circle(self.ekran, SIYAH, (goz2_x, goz2_y), 1)
        elif tip == "robot":
            # Kare gÃ¶zler
            pygame.draw.rect(self.ekran, (0, 255, 255), (goz1_x - 3, goz1_y - 3, 6, 6))
            pygame.draw.rect(self.ekran, (0, 255, 255), (goz2_x - 3, goz2_y - 3, 6, 6))
            pygame.draw.circle(self.ekran, (0, 150, 150), (goz1_x, goz1_y), 2)
            pygame.draw.circle(self.ekran, (0, 150, 150), (goz2_x, goz2_y), 2)
        elif tip == "pirat":
            # Normal gÃ¶z + gÃ¶z bandÄ±
            pygame.draw.circle(self.ekran, BEYAZ, (goz1_x, goz1_y), 4)
            pygame.draw.circle(self.ekran, SIYAH, (goz1_x, goz1_y), 2)
            # GÃ¶z bandÄ±
            pygame.draw.circle(self.ekran, SIYAH, (goz2_x, goz2_y), 5)
            pygame.draw.line(self.ekran, SIYAH, (x - 10, y - 3), (x + 10, y - 3), 3)
    
    def arkaplan_ayarlari_menu_ciz(self, menu_arkaplan, oyun_arkaplan, menu_secili_index=0, oyun_secili_index=0, hangi_menu="MENU"):
        """Arka plan ayarlarÄ± alt menÃ¼sÃ¼ - Modern sekme tasarÄ±mÄ±"""
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('ARKA PLAN AYARLARI', True, TURUNCU)
        self.ekran.blit(baslik, baslik.get_rect(center=(GENISLIK // 2, 40)))
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('MenÃ¼ ve oyun iÃ§in arka plan seÃ§in', True, ACIK_GRI)
        self.ekran.blit(alt_baslik, alt_baslik.get_rect(center=(GENISLIK // 2, 70)))
        
        # Sekmeler
        tab_y, tab_width, tab_height = 100, 200, 40
        tab_spacing = 20
        tabs_start_x = GENISLIK // 2 - (tab_width + tab_spacing // 2)
        
        menu_tab_rect = pygame.Rect(tabs_start_x, tab_y, tab_width, tab_height)
        oyun_tab_rect = pygame.Rect(tabs_start_x + tab_width + tab_spacing, tab_y, tab_width, tab_height)
        
        # Sekmeleri Ã§iz
        self._sekme_ciz(menu_tab_rect, 'Ana MenÃ¼', 'ğŸ–¼ï¸', hangi_menu == "MENU", (100, 149, 237), mouse_pos)
        self._sekme_ciz(oyun_tab_rect, 'Oyun Ä°Ã§i', 'ğŸ®', hangi_menu == "OYUN", (60, 179, 113), mouse_pos)
        
        # Sekme rectlerini sakla (mouse iÃ§in)
        self.menu_bg_tab_rect = menu_tab_rect
        self.oyun_bg_tab_rect = oyun_tab_rect
        
        # DosyalarÄ± al
        dosyalar = self.arkaplan_dosyalari_getir()
        secili_index = menu_secili_index if hangi_menu == "MENU" else oyun_secili_index
        
        # Ä°Ã§erik alanÄ±
        content_y = 160
        
        # VarsayÄ±lan gradient seÃ§eneÄŸi (Ã¶zel kart)
        default_rect = pygame.Rect(GENISLIK // 2 - 300, content_y, 600, 60)
        is_default_selected = secili_index == -1
        
        # VarsayÄ±lan kart arka planÄ±
        if is_default_selected:
            bg_color = (40, 80, 40)
            border_color = YESIL
            border_width = 4
        elif default_rect.collidepoint(mouse_pos):
            bg_color = (30, 60, 30)
            border_color = (100, 255, 100)
            border_width = 2
        else:
            bg_color = (30, 30, 50)
            border_color = (80, 80, 100)
            border_width = 2
        
        pygame.draw.rect(self.ekran, bg_color, default_rect, border_radius=10)
        pygame.draw.rect(self.ekran, border_color, default_rect, border_width, border_radius=10)
        
        # Gradient Ã¶nizleme (mini)
        preview_rect = pygame.Rect(default_rect.x + 15, default_rect.y + 10, 80, 40)
        for i in range(40):
            c = int(20 + (i / 40) * 20)
            pygame.draw.line(self.ekran, (c, c, c + 40), 
                           (preview_rect.x, preview_rect.y + i), 
                           (preview_rect.right, preview_rect.y + i))
        pygame.draw.rect(self.ekran, border_color, preview_rect, 1, border_radius=5)
        
        # VarsayÄ±lan metin
        default_text = self.font.render('VarsayÄ±lan Gradient', True, 
                                       YESIL if is_default_selected else BEYAZ)
        self.ekran.blit(default_text, default_text.get_rect(left=preview_rect.right + 20, 
                                                             centery=default_rect.centery))
        
        # SeÃ§ili iÅŸareti
        if is_default_selected:
            check = self.render_emoji('âœ“', 30)
            self.ekran.blit(check, (default_rect.right - 50, default_rect.centery - 15))
        
        # Rect listesi
        self.arkaplan_rects = [(-1, default_rect)]
        
        # Dosya listesi baÅŸlÄ±ÄŸÄ±
        if len(dosyalar) > 0:
            files_label = self.kucuk_font.render('Ã–zel Arka Planlar:', True, ACIK_GRI)
            self.ekran.blit(files_label, (GENISLIK // 2 - 300, content_y + 80))
            
            # Dosyalar - Grid layout (3 sÃ¼tun)
            grid_start_y = content_y + 110
            card_width = 180
            card_height = 50
            spacing = 15
            cols = 3
            max_gosterim = 6
            
            for i, dosya in enumerate(dosyalar[:max_gosterim]):
                row = i // cols
                col = i % cols
                x = GENISLIK // 2 - 300 + col * (card_width + spacing)
                y = grid_start_y + row * (card_height + spacing)
                
                file_rect = pygame.Rect(x, y, card_width, card_height)
                self.arkaplan_rects.append((i, file_rect))
                
                is_selected = i == secili_index
                is_hovered = file_rect.collidepoint(mouse_pos)
                
                # Kart arka planÄ±
                if is_selected:
                    bg_color = (40, 80, 40)
                    border_color = YESIL
                    border_width = 3
                elif is_hovered:
                    bg_color = (30, 60, 30)
                    border_color = (100, 255, 100)
                    border_width = 2
                else:
                    bg_color = (30, 30, 50)
                    border_color = (80, 80, 100)
                    border_width = 1
                
                pygame.draw.rect(self.ekran, bg_color, file_rect, border_radius=8)
                pygame.draw.rect(self.ekran, border_color, file_rect, border_width, border_radius=8)
                
                # Dosya ikonu
                icon = self.render_emoji('ğŸ–¼ï¸', 24)
                self.ekran.blit(icon, (x + 10, y + 13))
                
                # Dosya ismi (kÄ±saltÄ±lmÄ±ÅŸ)
                dosya_ismi = dosya if len(dosya) <= 18 else dosya[:15] + '...'
                file_text = self.kucuk_font.render(dosya_ismi, True, 
                                                   YESIL if is_selected else BEYAZ)
                self.ekran.blit(file_text, file_text.get_rect(left=x + 40, centery=y + card_height // 2))
                
                # SeÃ§ili iÅŸareti
                if is_selected:
                    check = self.render_emoji('âœ“', 20)
                    self.ekran.blit(check, (x + card_width - 30, y + 15))
            
            # Daha fazla dosya varsa bilgi
            if len(dosyalar) > max_gosterim:
                more_text = self.kucuk_font.render(f'+{len(dosyalar) - max_gosterim} daha...', True, GRI)
                self.ekran.blit(more_text, (GENISLIK // 2 - 300, grid_start_y + 130))
        else:
            # Dosya yoksa bilgi
            no_files_rect = pygame.Rect(GENISLIK // 2 - 200, content_y + 100, 400, 80)
            pygame.draw.rect(self.ekran, (40, 40, 60), no_files_rect, border_radius=10)
            pygame.draw.rect(self.ekran, (80, 80, 120), no_files_rect, 2, border_radius=10)
            
            info_icon = self.render_emoji('ğŸ“', 40)
            self.ekran.blit(info_icon, (GENISLIK // 2 - 20, content_y + 110))
            
            info_text = self.kucuk_font.render('backgrounds/ klasÃ¶rÃ¼ne resim ekleyin', True, ACIK_GRI)
            self.ekran.blit(info_text, info_text.get_rect(center=(GENISLIK // 2, content_y + 160)))
        
        # Talimatlar
        talimat_y = 470
        if hangi_menu == "MENU":
            switch_text = self.kucuk_font.render('TAB: Oyun Arka PlanÄ±', True, TURUNCU)
        else:
            switch_text = self.kucuk_font.render('TAB: MenÃ¼ Arka PlanÄ±', True, TURUNCU)
        self.ekran.blit(switch_text, switch_text.get_rect(center=(GENISLIK // 2, talimat_y)))
        
        control_text = self.kucuk_font.render('Ok tuÅŸlarÄ± veya Fare | ENTER: Uygula', True, ACIK_GRI)
        self.ekran.blit(control_text, control_text.get_rect(center=(GENISLIK // 2, talimat_y + 25)))
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Ayarlara DÃ¶n', True, GRI)
        self.ekran.blit(geri_text, geri_text.get_rect(center=(GENISLIK // 2, 515)))

    def oyun_bitti_ekrani(self, skor, en_yuksek_skor, yeni_basarimlar=None):
        """Oyun bitti ekranÄ±nÄ± Ã§izer"""
        # Arka plan game.py'de Ã§izildiÄŸi iÃ§in burada fill yapmÄ±yoruz
        
        # Oyun bitti metni
        bitti_metni = self.buyuk_font.render('OYUN BÄ°TTÄ°!', True, KIRMIZI)
        bitti_rect = bitti_metni.get_rect(center=(GENISLIK // 2, 150))
        self.ekran.blit(bitti_metni, bitti_rect)
        
        # Skor
        skor_metni = self.font.render(f'Skorunuz: {skor}', True, BEYAZ)
        skor_rect = skor_metni.get_rect(center=(GENISLIK // 2, 250))
        self.ekran.blit(skor_metni, skor_rect)
        
        # Yeni rekor mu?
        if skor == en_yuksek_skor and skor > 0:
            rekor_metni = self.font.render('ğŸ‰ YENÄ° REKOR! ğŸ‰', True, TURUNCU)
            rekor_rect = rekor_metni.get_rect(center=(GENISLIK // 2, 300))
            self.ekran.blit(rekor_metni, rekor_rect)
        
        # Yeni baÅŸarÄ±mlar varsa gÃ¶ster
        if yeni_basarimlar and len(yeni_basarimlar) > 0:
            basarim_y = 320
            basarim_baslik = self.font.render('YENI BASARIM!', True, (255, 215, 0))
            basarim_baslik_rect = basarim_baslik.get_rect(center=(GENISLIK // 2, basarim_y))
            self.ekran.blit(basarim_baslik, basarim_baslik_rect)
            
            # Ä°lk 3 baÅŸarÄ±mÄ± gÃ¶ster
            from constants import BASARIMLAR
            for i, basarim_adi in enumerate(yeni_basarimlar[:3]):
                if basarim_adi in BASARIMLAR:
                    basarim_text = self.kucuk_font.render(
                        f'+ {BASARIMLAR[basarim_adi]["isim"]}',
                        True,
                        YESIL
                    )
                    basarim_text_rect = basarim_text.get_rect(center=(GENISLIK // 2, basarim_y + 35 + i * 25))
                    self.ekran.blit(basarim_text, basarim_text_rect)
        
        # SeÃ§enekler
        yeniden_metni = self.kucuk_font.render('Yeniden oynamak iÃ§in SPACE', True, BEYAZ)
        yeniden_rect = yeniden_metni.get_rect(center=(GENISLIK // 2, 480))
        self.ekran.blit(yeniden_metni, yeniden_rect)
        
        menu_metni = self.kucuk_font.render('Ana menÃ¼ iÃ§in M', True, BEYAZ)
        menu_rect = menu_metni.get_rect(center=(GENISLIK // 2, 515))
        self.ekran.blit(menu_metni, menu_rect)
        
        cikis_metni = self.kucuk_font.render('Ã‡Ä±kmak iÃ§in ESC', True, GRI)
        cikis_rect = cikis_metni.get_rect(center=(GENISLIK // 2, 545))
        self.ekran.blit(cikis_metni, cikis_rect)

    def skor_goster(self, skor, en_yuksek_skor):
        """Oyun sÄ±rasÄ±nda skoru gÃ¶sterir"""
        skor_metni = self.font.render(f'Skor: {skor}', True, BEYAZ)
        self.ekran.blit(skor_metni, (10, 10))
        
        # En yÃ¼ksek skoru da gÃ¶ster
        if en_yuksek_skor > 0:
            en_yuksek = self.kucuk_font.render(f'En YÃ¼ksek: {en_yuksek_skor}', True, TURUNCU)
            self.ekran.blit(en_yuksek, (10, 50))
    
    def pvp_skorlar_goster(self, skor1, skor2, isim1="Oyuncu 1", isim2="Oyuncu 2", p1_kalkan=False, p2_kalkan=False, p1_hiz=0, p2_hiz=0):
        """PVP modunda iki oyuncunun skorlarÄ±nÄ± ve yeteneklerini gÃ¶sterir"""
        # Oyuncu 1 (Mavi) - sol Ã¼stte
        p1_text = self.font.render(f'{isim1}: {skor1}', True, (100, 150, 255))
        self.ekran.blit(p1_text, (10, 10))
        
        # Oyuncu 1 yetenekler (skorun altÄ±nda)
        y_offset = 40
        if p1_kalkan:
            kalkan_icon = self.kucuk_font.render('ğŸ›¡ï¸ KALKAN', True, (150, 255, 150))
            self.ekran.blit(kalkan_icon, (10, y_offset))
            y_offset += 25
        if p1_hiz > 0:
            hiz_text = self.kucuk_font.render(f'âš¡ HIZ: {p1_hiz:.1f}s', True, (255, 255, 100))
            self.ekran.blit(hiz_text, (10, y_offset))
        
        # Oyuncu 2 (KÄ±rmÄ±zÄ±) - saÄŸ Ã¼stte
        p2_text = self.font.render(f'{isim2}: {skor2}', True, (255, 100, 100))
        p2_rect = p2_text.get_rect(topright=(GENISLIK - 10, 10))
        self.ekran.blit(p2_text, p2_rect)
        
        # Oyuncu 2 yetenekler (skorun altÄ±nda, saÄŸa hizalÄ±)
        y_offset = 40
        if p2_kalkan:
            kalkan_icon = self.kucuk_font.render('KALKAN ğŸ›¡ï¸', True, (150, 255, 150))
            kalkan_rect = kalkan_icon.get_rect(topright=(GENISLIK - 10, y_offset))
            self.ekran.blit(kalkan_icon, kalkan_rect)
            y_offset += 25
        if p2_hiz > 0:
            hiz_text = self.kucuk_font.render(f'{p2_hiz:.1f}s :HIZ âš¡', True, (255, 255, 100))
            hiz_rect = hiz_text.get_rect(topright=(GENISLIK - 10, y_offset))
            self.ekran.blit(hiz_text, hiz_rect)
    
    def pvp_oyun_bitti_ekrani(self, skor1, skor2, kazanan, isim1="Oyuncu 1", isim2="Oyuncu 2"):
        """PVP modu iÃ§in oyun bitti ekranÄ±"""
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('OYUN BÄ°TTÄ°', True, KIRMIZI)
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 150))
        self.ekran.blit(baslik, baslik_rect)
        
        # Kazanan - isimleri kullan
        if kazanan is None or kazanan == "":
            # Kazanan belirlenmemiÅŸse varsayÄ±lan
            kazanan_renk = (200, 200, 200)
            kazanan_text = self.font.render('OYUN BÄ°TTÄ°!', True, kazanan_renk)
        elif kazanan == "Berabere":
            kazanan_renk = (255, 215, 0)
            kazanan_text = self.font.render('BERABERE!', True, kazanan_renk)
        elif kazanan == isim1:
            # Oyuncu 1 kazandÄ± (isimle karÅŸÄ±laÅŸtÄ±r)
            kazanan_renk = (100, 150, 255)
            kazanan_text = self.font.render(f'{isim1} KAZANDI!', True, kazanan_renk)
        elif kazanan == isim2:
            # Oyuncu 2 kazandÄ± (isimle karÅŸÄ±laÅŸtÄ±r)
            if "Bot" in isim2:
                kazanan_renk = (255, 140, 0)  # Turuncu
            else:
                kazanan_renk = (255, 100, 100)  # KÄ±rmÄ±zÄ±
            kazanan_text = self.font.render(f'{isim2} KAZANDI!', True, kazanan_renk)
        else:
            # Eski format kontrolleri (geriye dÃ¶nÃ¼k uyumluluk)
            if "Oyuncu 1" in kazanan or "Mavi" in kazanan or ("Oyuncu" in kazanan and "Sen" in kazanan):
                kazanan_renk = (100, 150, 255)
                kazanan_text = self.font.render(f'{isim1} KAZANDI!', True, kazanan_renk)
            else:
                if "Bot" in isim2:
                    kazanan_renk = (255, 140, 0)  # Turuncu
                else:
                    kazanan_renk = (255, 100, 100)  # KÄ±rmÄ±zÄ±
                kazanan_text = self.font.render(f'{isim2} KAZANDI!', True, kazanan_renk)
        
        kazanan_rect = kazanan_text.get_rect(center=(GENISLIK // 2, 220))
        self.ekran.blit(kazanan_text, kazanan_rect)
        
        # Skorlar - isimleri kullan
        p1_skor = self.font.render(f'{isim1} (Mavi): {skor1}', True, (100, 150, 255))
        p1_rect = p1_skor.get_rect(center=(GENISLIK // 2, 290))
        self.ekran.blit(p1_skor, p1_rect)
        
        # Ä°kinci oyuncu iÃ§in renk belirle
        if "Bot" in isim2:
            p2_renk = (255, 140, 0)  # Turuncu (bot)
            p2_skor_text = f'{isim2} (Turuncu): {skor2}'
        else:
            p2_renk = (255, 100, 100)  # KÄ±rmÄ±zÄ± (PVP)
            p2_skor_text = f'{isim2} (Kirmizi): {skor2}'
        
        p2_skor = self.font.render(p2_skor_text, True, p2_renk)
        p2_rect = p2_skor.get_rect(center=(GENISLIK // 2, 330))
        self.ekran.blit(p2_skor, p2_rect)
        
        # SeÃ§enekler
        yeniden_metni = self.kucuk_font.render('Yeniden oynamak iÃ§in SPACE', True, BEYAZ)
        yeniden_rect = yeniden_metni.get_rect(center=(GENISLIK // 2, 410))
        self.ekran.blit(yeniden_metni, yeniden_rect)
        
        menu_metni = self.kucuk_font.render('Ana menÃ¼ iÃ§in M', True, BEYAZ)
        menu_rect = menu_metni.get_rect(center=(GENISLIK // 2, 450))
        self.ekran.blit(menu_metni, menu_rect)
        
        cikis_metni = self.kucuk_font.render('Ã‡Ä±kmak iÃ§in ESC', True, GRI)
        cikis_rect = cikis_metni.get_rect(center=(GENISLIK // 2, 490))
        self.ekran.blit(cikis_metni, cikis_rect)
    
    def pvp_isim_giris_ciz(self, aktif_oyuncu, isim1, isim2):
        """PVP isim giriÅŸ ekranÄ±"""
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('PVP - OYUNCU Ä°SÄ°MLERÄ°', True, MAVI)
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 100))
        self.ekran.blit(baslik, baslik_rect)
        
        # Oyuncu 1 isim giriÅŸi
        y1 = 220
        p1_label = self.font.render('Oyuncu 1 (Mavi - WASD):', True, (100, 150, 255))
        p1_label_rect = p1_label.get_rect(center=(GENISLIK // 2, y1))
        self.ekran.blit(p1_label, p1_label_rect)
        
        # Input kutusu
        input1_rect = pygame.Rect(GENISLIK // 2 - 150, y1 + 30, 300, 40)
        pygame.draw.rect(self.ekran, BEYAZ if aktif_oyuncu == 1 else GRI, input1_rect, 3, border_radius=5)
        if aktif_oyuncu == 1:
            pygame.draw.rect(self.ekran, (50, 100, 150), input1_rect, border_radius=5)
        
        isim1_text = self.font.render(isim1 if isim1 else '|', True, BEYAZ)
        isim1_text_rect = isim1_text.get_rect(center=(GENISLIK // 2, y1 + 50))
        self.ekran.blit(isim1_text, isim1_text_rect)
        
        # Oyuncu 2 isim giriÅŸi
        y2 = 350
        p2_label = self.font.render('Oyuncu 2 (KÄ±rmÄ±zÄ± - Ok TuÅŸlarÄ±):', True, (255, 100, 100))
        p2_label_rect = p2_label.get_rect(center=(GENISLIK // 2, y2))
        self.ekran.blit(p2_label, p2_label_rect)
        
        # Input kutusu
        input2_rect = pygame.Rect(GENISLIK // 2 - 150, y2 + 30, 300, 40)
        pygame.draw.rect(self.ekran, BEYAZ if aktif_oyuncu == 2 else GRI, input2_rect, 3, border_radius=5)
        if aktif_oyuncu == 2:
            pygame.draw.rect(self.ekran, (150, 50, 50), input2_rect, border_radius=5)
        
        isim2_text = self.font.render(isim2 if isim2 else '|', True, BEYAZ)
        isim2_text_rect = isim2_text.get_rect(center=(GENISLIK // 2, y2 + 50))
        self.ekran.blit(isim2_text, isim2_text_rect)
        
        # Talimatlar
        if aktif_oyuncu == 1:
            talimat = self.kucuk_font.render('Ä°sim girin ve ENTER\'a basÄ±n', True, ACIK_GRI)
        else:
            talimat = self.kucuk_font.render('Ä°sim girin ve ENTER\'a basÄ±n (Oyunu baÅŸlat)', True, ACIK_GRI)
        
        talimat_rect = talimat.get_rect(center=(GENISLIK // 2, 480))
        self.ekran.blit(talimat, talimat_rect)
        
        geri = self.kucuk_font.render('ESC - Geri DÃ¶n', True, GRI)
        geri_rect = geri.get_rect(center=(GENISLIK // 2, 520))
        self.ekran.blit(geri, geri_rect)
    
    def bot_zorluk_secim_ciz(self, secili_zorluk="Orta"):
        """Bot zorluk seÃ§im ekranÄ± - scroll destekli"""
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('BOT ZORLUK SEÃ‡Ä°MÄ°', True, (200, 100, 255))
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 80))
        self.ekran.blit(baslik, baslik_rect)
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('AI rakibinin zorluk seviyesini seÃ§in', True, ACIK_GRI)
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 130))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # Fare pozisyonu
        mouse_pos = self.mouse_pozisyonu_al()
        
        # Zorluk kartlarÄ±
        self.zorluk_kartlari = []
        from constants import BOT_ZORLUKLAR, BOT_ZORLUK_ACIKLAMALARI
        
        kart_genislik = 220
        kart_yukseklik = 120
        baslangic_y = 180
        aralik = 30
        
        zorluk_renkleri = {
            "Kolay": (100, 255, 100),   # YeÅŸil
            "Orta": (255, 200, 100),    # Turuncu
            "Zor": (255, 100, 100)      # KÄ±rmÄ±zÄ±
        }
        
        for i, zorluk in enumerate(BOT_ZORLUKLAR):
            # Scroll offset uygula
            y = baslangic_y + i * (kart_yukseklik + aralik) + self.bot_zorluk_scroll_offset
            x = (GENISLIK - kart_genislik) // 2
            
            kart_rect = pygame.Rect(x, y, kart_genislik, kart_yukseklik)
            self.zorluk_kartlari.append((zorluk, kart_rect))
            
            # Ekranda gÃ¶rÃ¼nÃ¼r mÃ¼ kontrol et
            if y + kart_yukseklik < 150 or y > YUKSEKLIK - 100:
                continue  # GÃ¶rÃ¼nmÃ¼yorsa Ã§izme
            
            # Hover veya seÃ§ili efekti
            if kart_rect.collidepoint(mouse_pos):
                hover_rect = pygame.Rect(x - 5, y - 5, kart_genislik + 10, kart_yukseklik + 10)
                pygame.draw.rect(self.ekran, (50, 30, 50), hover_rect, border_radius=15)
            
            # Kart arka planÄ±
            pygame.draw.rect(self.ekran, (40, 40, 40), kart_rect, border_radius=12)
            
            # KenarlÄ±k
            if zorluk == secili_zorluk:
                kenarlik_renk = zorluk_renkleri[zorluk]
                kenarlik_kalinlik = 4
            elif kart_rect.collidepoint(mouse_pos):
                kenarlik_renk = BEYAZ
                kenarlik_kalinlik = 3
            else:
                kenarlik_renk = (100, 100, 100)
                kenarlik_kalinlik = 2
            
            pygame.draw.rect(self.ekran, kenarlik_renk, kart_rect, kenarlik_kalinlik, border_radius=12)
            
            # Zorluk ismi
            renk = zorluk_renkleri[zorluk]
            zorluk_text = self.font.render(zorluk, True, renk)
            zorluk_rect = zorluk_text.get_rect(center=(GENISLIK // 2, y + 30))
            self.ekran.blit(zorluk_text, zorluk_rect)
            
            # AÃ§Ä±klama
            aciklama = BOT_ZORLUK_ACIKLAMALARI.get(zorluk, "")
            aciklama_text = self.kucuk_font.render(aciklama, True, ACIK_GRI)
            aciklama_rect = aciklama_text.get_rect(center=(GENISLIK // 2, y + 65))
            self.ekran.blit(aciklama_text, aciklama_rect)
            
            # SeÃ§ili iÅŸareti
            if zorluk == secili_zorluk:
                check = self.font.render('âœ“', True, renk)
                check_rect = check.get_rect(topright=(x + kart_genislik - 15, y + 10))
                self.ekran.blit(check, check_rect)
            
            # OYNA butonu (seÃ§iliyse)
            if zorluk == secili_zorluk:
                oyna_text = self.kucuk_font.render('OYNA â–¶', True, renk)
                oyna_rect = oyna_text.get_rect(center=(GENISLIK // 2, y + 95))
                self.ekran.blit(oyna_text, oyna_rect)
        
        # Scroll ipucu (eÄŸer scroll yapÄ±labiliyorsa)
        if self.bot_zorluk_scroll_offset > -100:  # AÅŸaÄŸÄ± scroll yapÄ±labilir
            scroll_ipucu = self.kucuk_font.render('â–¼ Fare tekerleÄŸi ile kaydÄ±r', True, (150, 150, 150))
            scroll_ipucu_rect = scroll_ipucu.get_rect(center=(GENISLIK // 2, 520))
            self.ekran.blit(scroll_ipucu, scroll_ipucu_rect)
        
        # Talimatlar
        talimat = self.kucuk_font.render('â†‘â†“ Ok tuÅŸlarÄ± veya 1/2/3 - Zorluk seÃ§ | SPACE/ENTER - Oyna', True, ACIK_GRI)
        talimat_rect = talimat.get_rect(center=(GENISLIK // 2, 545))
        self.ekran.blit(talimat, talimat_rect)
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Modlara DÃ¶n', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 570))
        self.ekran.blit(geri_text, geri_rect)
    
    def pvp_mod_secim_ciz(self, secili_mod="Normal"):
        """PVP mod seÃ§im ekranÄ± - Normal PVP veya Bomba PVP"""
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('PVP MOD SEÃ‡Ä°MÄ°', True, (100, 200, 255))
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 80))
        self.ekran.blit(baslik, baslik_rect)
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('Ä°ki oyunculu mod tÃ¼rÃ¼nÃ¼ seÃ§in', True, ACIK_GRI)
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 130))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # Fare pozisyonu
        mouse_pos = self.mouse_pozisyonu_al()
        
        # PVP mod kartlarÄ±
        self.pvp_mod_kartlari = []
        
        kart_genislik = 300
        kart_yukseklik = 140
        baslangic_y = 200
        aralik = 40
        
        # Mod bilgileri: (isim, emoji, renk, aÃ§Ä±klama)
        modlar = [
            ("Normal", "âš”ï¸", (100, 200, 255), "Klasik iki oyunculu mod", ["Bombalar yok", "Sadece saf rekabet"]),
            ("Bomba", "ğŸ’£âš”ï¸", (255, 150, 50), "BombalÄ± iki oyunculu mod", ["10 dinamik bomba", "Her yem = yeni konumlar"])
        ]
        
        for i, (mod_adi, emoji, renk, aciklama, ozellikler) in enumerate(modlar):
            y = baslangic_y + i * (kart_yukseklik + aralik)
            x = (GENISLIK - kart_genislik) // 2
            
            kart_rect = pygame.Rect(x, y, kart_genislik, kart_yukseklik)
            self.pvp_mod_kartlari.append((mod_adi, kart_rect))
            
            # Hover veya seÃ§ili efekti
            is_hover = kart_rect.collidepoint(mouse_pos)
            is_selected = mod_adi == secili_mod
            
            if is_hover:
                hover_rect = pygame.Rect(x - 5, y - 5, kart_genislik + 10, kart_yukseklik + 10)
                pygame.draw.rect(self.ekran, (50, 50, 70), hover_rect, border_radius=15)
            
            # Kart arka planÄ±
            bg_color = (45, 45, 55) if is_selected or is_hover else (30, 30, 40)
            pygame.draw.rect(self.ekran, bg_color, kart_rect, border_radius=12)
            
            # KenarlÄ±k
            if is_selected:
                kenarlik_renk = renk
                kenarlik_kalinlik = 4
            elif is_hover:
                kenarlik_renk = BEYAZ
                kenarlik_kalinlik = 3
            else:
                kenarlik_renk = (80, 80, 100)
                kenarlik_kalinlik = 2
            
            pygame.draw.rect(self.ekran, kenarlik_renk, kart_rect, kenarlik_kalinlik, border_radius=12)
            
            # Emoji ikonu (sol Ã¼st)
            emoji_surf = self.render_emoji(emoji, 50, renk)
            self.ekran.blit(emoji_surf, (x + 15, y + 15))
            
            # Mod ismi (Ã¼st saÄŸ)
            mod_text = self.font.render(f"{mod_adi} PVP", True, BEYAZ if is_hover or is_selected else ACIK_GRI)
            mod_rect = mod_text.get_rect(left=x + 80, top=y + 20)
            self.ekran.blit(mod_text, mod_rect)
            
            # AÃ§Ä±klama (orta)
            aciklama_text = self.kucuk_font.render(aciklama, True, ACIK_GRI)
            aciklama_rect = aciklama_text.get_rect(left=x + 80, top=y + 50)
            self.ekran.blit(aciklama_text, aciklama_rect)
            
            # Ã–zellikler (alt)
            ozellik_y = y + 75
            for ozellik in ozellikler:
                ozellik_text = self.kucuk_font.render(f"â€¢ {ozellik}", True, renk if is_selected else (150, 150, 170))
                self.ekran.blit(ozellik_text, (x + 20, ozellik_y))
                ozellik_y += 20
            
            # SeÃ§ili iÅŸareti
            if is_selected:
                check = self.font.render('âœ“', True, renk)
                check_rect = check.get_rect(topright=(x + kart_genislik - 15, y + 10))
                self.ekran.blit(check, check_rect)
            
            # OYNA butonu (hover veya seÃ§iliyse)
            if is_hover or is_selected:
                oyna_bg = pygame.Rect(x + kart_genislik - 90, y + kart_yukseklik - 35, 75, 25)
                pygame.draw.rect(self.ekran, (50, 50, 60), oyna_bg, border_radius=5)
                pygame.draw.rect(self.ekran, renk, oyna_bg, 2, border_radius=5)
                oyna_text = self.kucuk_font.render('OYNA â–¶', True, renk)
                oyna_rect = oyna_text.get_rect(center=oyna_bg.center)
                self.ekran.blit(oyna_text, oyna_rect)
        
        # Talimatlar
        talimat = self.kucuk_font.render('â†‘â†“ Ok tuÅŸlarÄ± veya 1/2 - Mod seÃ§ | SPACE/ENTER - Oyna', True, ACIK_GRI)
        talimat_rect = talimat.get_rect(center=(GENISLIK // 2, 545))
        self.ekran.blit(talimat, talimat_rect)
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Modlara DÃ¶n', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 570))
        self.ekran.blit(geri_text, geri_rect)
    
    def modlar_menu_ciz(self, bomba_modu=False):
        """Modlar menÃ¼sÃ¼nÃ¼ Ã§izer"""
        # Arka plan game.py'de Ã§izildiÄŸi iÃ§in burada fill yapmÄ±yoruz
        
        # Fare pozisyonu al
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('MODLAR', True, (100, 200, 255))
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 40))
        self.ekran.blit(baslik, baslik_rect)
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('Oyun deneyimini deÄŸiÅŸtiren Ã¶zel modlar', True, ACIK_GRI)
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 75))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # Mod kartlarÄ± - 2x2 grid
        y_start = 115
        card_width = 320
        card_height = 120
        x_spacing = 360
        y_spacing = 140
        
        # Mod bilgileri: (isim, ikon_emoji, renk, aÃ§Ä±klama, rect_attr)
        modlar = [
            ("Normal", "ğŸ®", YESIL, "Klasik yÄ±lan oyunu", "normal_rect", 0, 0),
            ("Bomba", "ğŸ’£", TURUNCU, "10 bomba, 2 blok dÃ¶nÃ¼ÅŸÃ¼m", "bomba_rect", 1, 0),
            ("PVP", "âš”ï¸", MAVI, "2 oyuncu, aynÄ± ekran", "pvp_rect", 0, 1),
            ("Bot VS", "ğŸ¤–", (255, 100, 150), "AI rakip ile oyna", "bot_rect", 1, 1)
        ]
        
        for isim, ikon_emoji, renk, aciklama, rect_attr, col, row in modlar:
            # Kart pozisyonu
            x = GENISLIK // 2 - x_spacing // 2 + col * x_spacing
            y = y_start + row * y_spacing
            
            # Rect oluÅŸtur ve sakla
            card_rect = pygame.Rect(x - card_width // 2, y, card_width, card_height)
            setattr(self, rect_attr, card_rect)
            
            # Hover kontrolÃ¼
            is_hover = card_rect.collidepoint(mouse_pos)
            
            # Kart arka planÄ±
            if is_hover:
                pygame.draw.rect(self.ekran, (40, 50, 70), card_rect, border_radius=12)
                pygame.draw.rect(self.ekran, renk, card_rect, 3, border_radius=12)
            else:
                pygame.draw.rect(self.ekran, (25, 25, 35), card_rect, border_radius=12)
                pygame.draw.rect(self.ekran, (70, 70, 90), card_rect, 1, border_radius=12)
            
            # Ä°kon (sol Ã¼st) - emoji ile - DAHA BÃœYÃœK VE BELÄ°RGÄ°N
            emoji_surf = self.render_emoji(ikon_emoji, 65, renk)
            self.ekran.blit(emoji_surf, (card_rect.x + 12, card_rect.y + 5))
            
            # Mod ismi (saÄŸ Ã¼st)
            isim_render = self.font.render(isim, True, BEYAZ if is_hover else ACIK_GRI)
            self.ekran.blit(isim_render, (card_rect.x + 85, card_rect.y + 18))
            
            # AÃ§Ä±klama (alt)
            aciklama_render = self.kucuk_font.render(aciklama, True, ACIK_GRI)
            self.ekran.blit(aciklama_render, (card_rect.x + 20, card_rect.y + 65))
            
            # OYNA butonu (saÄŸ alt)
            if is_hover:
                oyna_text = self.kucuk_font.render('OYNA', True, renk)
                oyna_rect = oyna_text.get_rect(right=card_rect.right - 20, bottom=card_rect.bottom - 15)
                # Buton arka planÄ±
                buton_bg = pygame.Rect(oyna_rect.x - 10, oyna_rect.y - 5, oyna_rect.width + 20, oyna_rect.height + 10)
                pygame.draw.rect(self.ekran, (50, 50, 60), buton_bg, border_radius=5)
                pygame.draw.rect(self.ekran, renk, buton_bg, 2, border_radius=5)
                self.ekran.blit(oyna_text, oyna_rect)
        
        # Alt bilgi kutusu
        bilgi_y = 380
        bilgi_rect = pygame.Rect(GENISLIK // 2 - 300, bilgi_y, 600, 28)
        pygame.draw.rect(self.ekran, (20, 20, 30), bilgi_rect, border_radius=6)
        
        bilgi_text = self.kucuk_font.render('Karta tÄ±klayÄ±n veya SPACE/1/2/3 tuÅŸlarÄ±', True, (150, 150, 200))
        bilgi_text_rect = bilgi_text.get_rect(center=(GENISLIK // 2, bilgi_y + 14))
        self.ekran.blit(bilgi_text, bilgi_text_rect)
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Ana MenÃ¼', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 420))
        self.ekran.blit(geri_text, geri_rect)

    def tema_menu_ciz(self, aktif_tema):
        """Tema seÃ§im menÃ¼sÃ¼"""
        # Fare pozisyonu al
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('TEMALAR', True, TURUNCU)
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 60))
        self.ekran.blit(baslik, baslik_rect)
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('Oyun gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ deÄŸiÅŸtirin', True, ACIK_GRI)
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 110))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # Tema kartlarÄ±
        self.tema_kartlari = []
        tema_isimleri = list(TEMALAR.keys())
        kart_genislik = 150
        kart_yukseklik = 100
        baslangic_x = (GENISLIK - (kart_genislik * 2 + 40)) // 2
        baslangic_y = 160
        
        for i, tema_adi in enumerate(tema_isimleri):
            satir = i // 2
            sutun = i % 2
            x = baslangic_x + sutun * (kart_genislik + 40)
            y = baslangic_y + satir * (kart_yukseklik + 30)
            
            kart_rect = pygame.Rect(x, y, kart_genislik, kart_yukseklik)
            self.tema_kartlari.append((tema_adi, kart_rect))
            
            # Tema renkleri
            arkaplan_renk = TEMALAR[tema_adi]["arkaplan"]
            izgara_renk = TEMALAR[tema_adi]["izgara"]
            
            # Kart arkaplan
            pygame.draw.rect(self.ekran, arkaplan_renk, kart_rect, border_radius=10)
            
            # SeÃ§ili veya hover efekti
            if tema_adi == aktif_tema:
                pygame.draw.rect(self.ekran, YESIL, kart_rect, 4, border_radius=10)
            elif kart_rect.collidepoint(mouse_pos):
                pygame.draw.rect(self.ekran, BEYAZ, kart_rect, 3, border_radius=10)
            else:
                pygame.draw.rect(self.ekran, izgara_renk, kart_rect, 2, border_radius=10)
            
            # Tema adÄ±
            tema_text = self.font.render(tema_adi, True, BEYAZ)
            tema_text_rect = tema_text.get_rect(center=(x + kart_genislik // 2, y + kart_yukseklik // 2))
            self.ekran.blit(tema_text, tema_text_rect)
            
            # SeÃ§ili iÅŸareti
            if tema_adi == aktif_tema:
                check = self.kucuk_font.render('âœ“', True, YESIL)
                check_rect = check.get_rect(topright=(x + kart_genislik - 10, y + 10))
                self.ekran.blit(check, check_rect)
        
        # Talimat
        talimat = self.kucuk_font.render('Temaya tÄ±klayarak seÃ§in', True, ACIK_GRI)
        talimat_rect = talimat.get_rect(center=(GENISLIK // 2, 490))
        self.ekran.blit(talimat, talimat_rect)
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Geri DÃ¶n', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 530))
        self.ekran.blit(geri_text, geri_rect)
    
    def basarimlar_ekrani_ciz(self, basarim_yoneticisi):
        """BaÅŸarÄ±mlar ekranÄ±"""
        # Fare pozisyonu al
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('BAÅARIMLAR', True, (255, 215, 0))
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 50))
        self.ekran.blit(baslik, baslik_rect)
        
        # Ä°lerleme
        acik = basarim_yoneticisi.acik_basarim_sayisi()
        toplam = basarim_yoneticisi.toplam_basarim_sayisi()
        
        # Trophy ikonu
        trophy_icon = self.render_emoji('ğŸ†', 32)
        trophy_rect = trophy_icon.get_rect(center=(GENISLIK // 2 - 150, 100))
        self.ekran.blit(trophy_icon, trophy_rect)
        
        ilerleme_text = self.font.render(f'{acik}/{toplam} BaÅŸarÄ±m AÃ§Ä±ldÄ±', True, YESIL)
        ilerleme_rect = ilerleme_text.get_rect(center=(GENISLIK // 2 + 20, 100))
        self.ekran.blit(ilerleme_text, ilerleme_rect)
        
        # SÄ±fÄ±rlama butonu
        mouse_pos = self.mouse_pozisyonu_al()
        self.sifirla_rect = pygame.Rect(GENISLIK - 220, 80, 200, 35)
        sifirla_renk = KIRMIZI if self.sifirla_rect.collidepoint(mouse_pos) else (200, 50, 50)
        
        pygame.draw.rect(self.ekran, (80, 20, 20), self.sifirla_rect, border_radius=5)
        pygame.draw.rect(self.ekran, sifirla_renk, self.sifirla_rect, 2, border_radius=5)
        
        # Refresh ikonu
        refresh_icon = self.render_emoji('ğŸ”„', 24)
        self.ekran.blit(refresh_icon, (self.sifirla_rect.x + 10, self.sifirla_rect.y + 5))
        
        sifirla_text = self.kucuk_font.render('BaÅŸarÄ±mlarÄ± SÄ±fÄ±rla', True, sifirla_renk)
        sifirla_text_rect = sifirla_text.get_rect(left=self.sifirla_rect.x + 40, centery=self.sifirla_rect.centery)
        self.ekran.blit(sifirla_text, sifirla_text_rect)
        
        # BaÅŸarÄ±mlarÄ± listele - scroll ile
        y_pos = 150 - self.basarim_scroll_offset
        gosterilen = 0
        self.basarim_rects = []  # Mouse iÃ§in
        
        for anahtar, bilgi in BASARIMLAR.items():
            basarim_durumu = basarim_yoneticisi.basarimlar.get(anahtar, {"acildi": False, "ilerleme": 0})
            acildi = basarim_durumu["acildi"]
            ilerleme = basarim_durumu["ilerleme"]
            hedef = bilgi["hedef"]
            
            # Sadece gÃ¶rÃ¼nÃ¼r alanda olanlarÄ± Ã§iz
            if y_pos < 130 or y_pos > 530:
                y_pos += 45
                continue
            
            # BaÅŸarÄ±m kartÄ±
            kart_rect = pygame.Rect(50, y_pos, GENISLIK - 100, 35)
            self.basarim_rects.append((anahtar, kart_rect))
            
            if acildi:
                # AÃ§Ä±k baÅŸarÄ±m - yeÅŸil
                pygame.draw.rect(self.ekran, (0, 100, 0), kart_rect, border_radius=5)
                pygame.draw.rect(self.ekran, YESIL, kart_rect, 2, border_radius=5)
                icon_char = "âœ“"
                renk = YESIL
            else:
                # Kilitli baÅŸarÄ±m - gri
                pygame.draw.rect(self.ekran, (30, 30, 30), kart_rect, border_radius=5)
                pygame.draw.rect(self.ekran, GRI, kart_rect, 1, border_radius=5)
                icon_char = "ğŸ”’"
                renk = GRI
            
            # Ä°kon render et
            icon_img = self.render_emoji(icon_char, 24)
            self.ekran.blit(icon_img, (60, y_pos + 5))
            
            # BaÅŸarÄ±m adÄ± ve aÃ§Ä±klama
            isim_text = self.kucuk_font.render(f'{bilgi["isim"]}', True, renk)
            self.ekran.blit(isim_text, (95, y_pos + 5))
            
            # Ä°lerleme
            if not acildi:
                ilerleme_str = f'{ilerleme}/{hedef}'
                ilerleme_text = self.kucuk_font.render(ilerleme_str, True, ACIK_GRI)
                ilerleme_rect = ilerleme_text.get_rect(right=GENISLIK - 60, centery=y_pos + 17)
                self.ekran.blit(ilerleme_text, ilerleme_rect)
            
            y_pos += 45
            gosterilen += 1
        
        # Scroll gÃ¶stergesi
        if toplam > 10:
            mouse_icon = self.render_emoji('ğŸ–±ï¸', 20)
            mouse_rect = mouse_icon.get_rect(center=(GENISLIK // 2 - 120, 545))
            self.ekran.blit(mouse_icon, mouse_rect)
            
            scroll_text = self.kucuk_font.render('Mouse tekerleÄŸi ile kaydÄ±r', True, ACIK_GRI)
            scroll_rect = scroll_text.get_rect(center=(GENISLIK // 2 + 20, 545))
            self.ekran.blit(scroll_text, scroll_rect)
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Ana MenÃ¼', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 565))
        self.ekran.blit(geri_text, geri_rect)
    
    def istatistikler_ekrani_ciz(self, istatistik_takipci):
        """Ä°statistikler ekranÄ±"""
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('Ä°STATÄ°STÄ°KLER', True, (100, 200, 255))
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 50))
        self.ekran.blit(baslik, baslik_rect)
        
        stats = istatistik_takipci.istatistikler
        
        # Sol sÃ¼tun
        sol_x = 100
        y_pos = 120
        
        stat_listesi = [
            ("ğŸ® Toplam Oyun:", str(stats["toplam_oyun"])),
            ("ğŸ“Š Toplam Skor:", str(stats["toplam_skor"])),
            ("ğŸ† En YÃ¼ksek:", str(stats["en_yuksek_skor"])),
            ("ğŸ“ˆ Ortalama:", str(istatistik_takipci.ortalama_skor())),
            ("ğŸ Toplam Yem:", str(stats["toplam_yem"])),
            ("ğŸ¥‡ AltÄ±n Elma:", str(stats["toplam_altin_elma"])),
            ("ğŸ’ Elmas:", str(stats["toplam_elmas"])),
            ("ğŸ En Uzun YÄ±lan:", str(stats["en_uzun_yilan"])),
        ]
        
        for i, (label, value) in enumerate(stat_listesi):
            if i < 4:
                x = sol_x
                y = y_pos + i * 35
            else:
                x = GENISLIK // 2 + 50
                y = y_pos + (i - 4) * 35
            
            label_text = self.kucuk_font.render(label, True, ACIK_GRI)
            self.ekran.blit(label_text, (x, y))
            
            value_text = self.font.render(value, True, YESIL)
            self.ekran.blit(value_text, (x + 180, y - 3))
        
        # Ã–lÃ¼m istatistikleri
        y_pos = 300
        olum_baslik = self.font.render('â˜ ï¸ Ã–lÃ¼m Sebepleri', True, TURUNCU)
        olum_rect = olum_baslik.get_rect(center=(GENISLIK // 2, y_pos))
        self.ekran.blit(olum_baslik, olum_rect)
        
        y_pos += 40
        olum_listesi = [
            ("Duvara Ã‡arpma:", stats["duvara_carpma"]),
            ("Kendine Ã‡arpma:", stats["kendine_carpma"]),
            ("Bombaya Ã‡arpma:", stats["bombaya_carpma"]),
        ]
        
        for label, value in olum_listesi:
            label_text = self.kucuk_font.render(label, True, ACIK_GRI)
            label_rect = label_text.get_rect(center=(GENISLIK // 2 - 80, y_pos))
            self.ekran.blit(label_text, label_rect)
            
            value_text = self.kucuk_font.render(str(value), True, KIRMIZI)
            value_rect = value_text.get_rect(center=(GENISLIK // 2 + 80, y_pos))
            self.ekran.blit(value_text, value_rect)
            
            y_pos += 30
        
        # Oyun sÃ¼resi
        sure_text = self.kucuk_font.render(f'â±ï¸ Toplam SÃ¼re: {istatistik_takipci.toplam_oyun_suresi_str()}', True, MAVI)
        sure_rect = sure_text.get_rect(center=(GENISLIK // 2, 480))
        self.ekran.blit(sure_text, sure_rect)
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Ana MenÃ¼', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 530))
        self.ekran.blit(geri_text, geri_rect)
    
    def muzik_secici_menu_ciz(self, ses_yoneticisi, secili_index=0, scroll_offset=0, secim_modu="MENU"):
        """MÃ¼zik seÃ§ici menÃ¼sÃ¼ - kullanÄ±cÄ± mÃ¼ziklerini gÃ¶sterir"""
        # Fare pozisyonu al
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('MÃœZÄ°K SEÃ‡Ä°CÄ°', True, (100, 200, 255))
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 40))
        self.ekran.blit(baslik, baslik_rect)
        
        # Sekmeler - Ana MenÃ¼ / Oyun Ä°Ã§i
        sekme_y = 75
        sekme_genislik = 150
        sekme_yukseklik = 35
        sekme_aralik = 10
        
        # Ana MenÃ¼ sekmesi
        menu_sekme_x = GENISLIK // 2 - sekme_genislik - sekme_aralik // 2
        menu_sekme_rect = pygame.Rect(menu_sekme_x, sekme_y, sekme_genislik, sekme_yukseklik)
        menu_aktif = secim_modu == "MENU"
        
        # Oyun Ä°Ã§i sekmesi
        oyun_sekme_x = GENISLIK // 2 + sekme_aralik // 2
        oyun_sekme_rect = pygame.Rect(oyun_sekme_x, sekme_y, sekme_genislik, sekme_yukseklik)
        oyun_aktif = secim_modu == "OYUN"
        
        # Sekmeleri Ã§iz
        for sekme_rect, aktif, metin in [
            (menu_sekme_rect, menu_aktif, "Ana MenÃ¼"),
            (oyun_sekme_rect, oyun_aktif, "Oyun Ä°Ã§i")
        ]:
            if aktif:
                pygame.draw.rect(self.ekran, (50, 50, 60), sekme_rect, border_radius=8)
                pygame.draw.rect(self.ekran, (100, 200, 255), sekme_rect, 3, border_radius=8)
            else:
                pygame.draw.rect(self.ekran, (30, 30, 40), sekme_rect, border_radius=8)
                pygame.draw.rect(self.ekran, (70, 70, 90), sekme_rect, 1, border_radius=8)
            
            sekme_text = self.kucuk_font.render(metin, True, BEYAZ if aktif else ACIK_GRI)
            sekme_text_rect = sekme_text.get_rect(center=sekme_rect.center)
            self.ekran.blit(sekme_text, sekme_text_rect)
        
        # Sekme rektlerini sakla (mouse tÄ±klama iÃ§in)
        self.menu_muzik_sekme_rect = menu_sekme_rect
        self.oyun_muzik_sekme_rect = oyun_sekme_rect
        
        # Alt baÅŸlÄ±k
        alt_baslik_text = f'{"Ana menÃ¼" if menu_aktif else "Oyun iÃ§i"} mÃ¼ziÄŸini seÃ§in'
        alt_baslik = self.kucuk_font.render(alt_baslik_text, True, ACIK_GRI)
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 120))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # KullanÄ±cÄ± mÃ¼ziklerini al
        kullanici_muzikleri = ses_yoneticisi.kullanici_muzikleri_getir()
        
        # YerleÅŸik mÃ¼zikler - isim ve yol Ã§iftleri
        yerlesik_muzikler = [
            ("Normal Oyun MÃ¼ziÄŸi", "Normal"),
            ("Bomba Modu MÃ¼ziÄŸi", "Bomba"),
            ("MenÃ¼ MÃ¼ziÄŸi", "Menu")
        ]
        
        # TÃ¼m mÃ¼zikler listesi
        tum_muzikler = yerlesik_muzikler + kullanici_muzikleri
        
        if len(tum_muzikler) == 0:
            # MÃ¼zik yok mesajÄ±
            mesaj1 = self.font.render('HenÃ¼z Ã¶zel mÃ¼zik yok!', True, TURUNCU)
            mesaj1_rect = mesaj1.get_rect(center=(GENISLIK // 2, 250))
            self.ekran.blit(mesaj1, mesaj1_rect)
            
            mesaj2 = self.kucuk_font.render('music/ klasÃ¶rÃ¼ne MP3, WAV veya OGG dosyalarÄ± ekleyin', True, ACIK_GRI)
            mesaj2_rect = mesaj2.get_rect(center=(GENISLIK // 2, 300))
            self.ekran.blit(mesaj2, mesaj2_rect)
        else:
            # MÃ¼zik listesi
            y_start = 150  # Sekme eklediÄŸimiz iÃ§in daha aÅŸaÄŸÄ±da baÅŸla
            card_height = 60
            card_spacing = 62
            max_visible = 6  # Bir tane daha az gÃ¶ster (sekme iÃ§in yer aÃ§tÄ±k)
            
            # Scroll dÃ¼zeltme
            max_scroll = max(0, len(tum_muzikler) - max_visible)
            scroll_offset = max(0, min(scroll_offset, max_scroll))
            
            # MÃ¼zik kartlarÄ±nÄ± Ã§iz
            self.muzik_rects = []
            for i in range(scroll_offset, min(scroll_offset + max_visible, len(tum_muzikler))):
                display_index = i - scroll_offset
                y_pos = y_start + display_index * card_spacing
                
                # Kart alanÄ±
                card_width = 680
                card_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, y_pos, card_width, card_height)
                self.muzik_rects.append((i, card_rect))
                
                # YerleÅŸik mi kontrol
                is_yerlesik = i < len(yerlesik_muzikler)
                
                # SeÃ§ili veya hover durumlarÄ±
                if i == secili_index:
                    # SeÃ§ili - parlak yeÅŸil
                    pygame.draw.rect(self.ekran, (30, 80, 30), card_rect, border_radius=10)
                    pygame.draw.rect(self.ekran, (0, 255, 100), card_rect, 3, border_radius=10)
                    text_renk = BEYAZ
                    etiket_renk = (0, 255, 100)
                elif card_rect.collidepoint(mouse_pos):
                    # Hover - mavi
                    pygame.draw.rect(self.ekran, (40, 50, 70), card_rect, border_radius=10)
                    pygame.draw.rect(self.ekran, (100, 200, 255), card_rect, 2, border_radius=10)
                    text_renk = BEYAZ
                    etiket_renk = (100, 200, 255)
                else:
                    # Normal - koyu
                    pygame.draw.rect(self.ekran, (25, 25, 35), card_rect, border_radius=10)
                    pygame.draw.rect(self.ekran, (70, 70, 90), card_rect, 1, border_radius=10)
                    text_renk = ACIK_GRI
                    etiket_renk = ACIK_GRI
                
                # Ä°kon belirleme
                if is_yerlesik:
                    if "Normal" in tum_muzikler[i][0]:
                        ikon = "ğŸ®"
                    elif "Bomba" in tum_muzikler[i][0]:
                        ikon = "ğŸ’£"
                    else:
                        ikon = "ğŸ "
                    ikon_renk = TURUNCU
                else:
                    ikon = "ğŸµ"
                    ikon_renk = (100, 200, 255)
                
                # Ä°kon Ã§iz
                ikon_text = self.font.render(ikon, True, ikon_renk)
                self.ekran.blit(ikon_text, (card_rect.x + 15, card_rect.y + 15))
                
                # MÃ¼zik ismi - emoji olmadan
                muzik_adi = tum_muzikler[i][0]
                
                # Uzun isimleri kÄ±salt
                max_uzunluk = 45
                if len(muzik_adi) > max_uzunluk:
                    muzik_adi = muzik_adi[:max_uzunluk-3] + '...'
                
                isim_text = self.font.render(muzik_adi, True, text_renk)
                self.ekran.blit(isim_text, (card_rect.x + 70, card_rect.y + 10))
                
                # TÃ¼r etiketi (saÄŸda, kÃ¼Ã§Ã¼k)
                if is_yerlesik:
                    etiket_text = self.kucuk_font.render('YerleÅŸik', True, etiket_renk)
                else:
                    etiket_text = self.kucuk_font.render('Ã–zel MÃ¼zik', True, etiket_renk)
                
                etiket_rect = etiket_text.get_rect(right=card_rect.right - 15, centery=card_rect.centery)
                self.ekran.blit(etiket_text, etiket_rect)
        
        # Talimatlar kutusu
        y_talimat = 530
        talimat_bg = pygame.Rect(GENISLIK // 2 - 350, y_talimat - 5, 700, 45)
        pygame.draw.rect(self.ekran, (20, 20, 30), talimat_bg, border_radius=8)
        pygame.draw.rect(self.ekran, (80, 80, 100), talimat_bg, 1, border_radius=8)
        
        if len(tum_muzikler) > 0:
            talimat1 = self.kucuk_font.render('â†‘â†“ Ok TuÅŸlarÄ± veya Fare ile SeÃ§  |  ENTER veya TÄ±klama ile Ã‡al', True, BEYAZ)
            talimat1_rect = talimat1.get_rect(center=(GENISLIK // 2, y_talimat + 17))
            self.ekran.blit(talimat1, talimat1_rect)
        
        # Geri dÃ¶n
        geri_text = self.kucuk_font.render('ESC - Ayarlara DÃ¶n', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 585))
        self.ekran.blit(geri_text, geri_rect)
        
        return tum_muzikler

    def krediler_ekrani_ciz(self):
        """EmeÄŸi GeÃ§enler - Krediler ekranÄ±"""
        # Fare pozisyonu al
        mouse_pos = self.mouse_pozisyonu_al()
        
        # BaÅŸlÄ±k
        baslik = self.buyuk_font.render('EMEÄÄ° GEÃ‡ENLER', True, (255, 215, 0))
        baslik_rect = baslik.get_rect(center=(GENISLIK // 2, 50))
        self.ekran.blit(baslik, baslik_rect)
        
        # Alt baÅŸlÄ±k
        alt_baslik = self.kucuk_font.render('Bu oyunu hayata geÃ§iren insanlar', True, ACIK_GRI)
        alt_baslik_rect = alt_baslik.get_rect(center=(GENISLIK // 2, 85))
        self.ekran.blit(alt_baslik, alt_baslik_rect)
        
        # YapÄ±mcÄ±lar kartÄ±
        y_pos = 130
        card_width = 600
        card_height = 280
        
        # Ana kart
        card_rect = pygame.Rect(GENISLIK // 2 - card_width // 2, y_pos, card_width, card_height)
        pygame.draw.rect(self.ekran, (25, 25, 35), card_rect, border_radius=15)
        pygame.draw.rect(self.ekran, (255, 215, 0), card_rect, 3, border_radius=15)
        
        # Ä°Ã§erik
        content_y = y_pos + 30
        
        # Oyun TasarÄ±mÄ± ve Kodlama
        tasarim_baslik = self.font.render('ğŸ® Oyun TasarÄ±mÄ± & Kodlama', True, YESIL)
        tasarim_rect = tasarim_baslik.get_rect(center=(GENISLIK // 2, content_y))
        self.ekran.blit(tasarim_baslik, tasarim_rect)
        
        # Ä°simler
        isim1 = self.font.render('Burak YaÅŸayan', True, BEYAZ)
        isim1_rect = isim1.get_rect(center=(GENISLIK // 2, content_y + 40))
        self.ekran.blit(isim1, isim1_rect)
        
        isim2 = self.font.render('Arda Demirkan', True, BEYAZ)
        isim2_rect = isim2.get_rect(center=(GENISLIK // 2, content_y + 75))
        self.ekran.blit(isim2, isim2_rect)
        
        # AyraÃ§
        pygame.draw.line(self.ekran, (70, 70, 90), 
                        (GENISLIK // 2 - 250, content_y + 110),
                        (GENISLIK // 2 + 250, content_y + 110), 2)
        
        # Ã–zel TeÅŸekkÃ¼rler
        tesekkur_baslik = self.kucuk_font.render('Ã–zel TeÅŸekkÃ¼rler', True, (255, 215, 0))
        tesekkur_rect = tesekkur_baslik.get_rect(center=(GENISLIK // 2, content_y + 135))
        self.ekran.blit(tesekkur_baslik, tesekkur_rect)
        
        # TeÅŸekkÃ¼r mesajÄ±
        mesaj1 = self.kucuk_font.render('Python & Pygame topluluÄŸuna,', True, ACIK_GRI)
        mesaj1_rect = mesaj1.get_rect(center=(GENISLIK // 2, content_y + 165))
        self.ekran.blit(mesaj1, mesaj1_rect)
        
        mesaj2 = self.kucuk_font.render('Bu projeyi oynarken eÄŸlenen herkese,', True, ACIK_GRI)
        mesaj2_rect = mesaj2.get_rect(center=(GENISLIK // 2, content_y + 188))
        self.ekran.blit(mesaj2, mesaj2_rect)
        
        mesaj3 = self.kucuk_font.render('Ve klasik yÄ±lan oyununu seven tÃ¼m oyunculara!', True, ACIK_GRI)
        mesaj3_rect = mesaj3.get_rect(center=(GENISLIK // 2, content_y + 211))
        self.ekran.blit(mesaj3, mesaj3_rect)
        
        # Alt bilgi
        tarih_text = self.kucuk_font.render('Â© 2025 - TÃ¼m haklarÄ± saklÄ±dÄ±r', True, GRI)
        tarih_rect = tarih_text.get_rect(center=(GENISLIK // 2, 455))
        self.ekran.blit(tarih_text, tarih_rect)
        
        # Geri dÃ¶n butonu
        geri_text = self.kucuk_font.render('ESC - Ana MenÃ¼', True, GRI)
        geri_rect = geri_text.get_rect(center=(GENISLIK // 2, 490))
        self.ekran.blit(geri_text, geri_rect)

